<!DOCTYPE html>
<html lang="zh-cn" data-theme="light"><head>
    <meta name="google-site-verification" content="kw1N-Xm6qEr1c9PGuRd0U_T6DXkw_EHsLyz5LpuDDv8" />
    <meta name="msvalidate.01" content="EE98205D30806C22C519683EFC53E9BA" />
    <meta name="baidu-site-verification" content="iPC3wUcQLL" />
    <title>  js promiseè¯¦è§£ </title>
    <meta charset="utf-8"><meta name="generator" content="Hugo 0.85.0" /><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <meta name="description" itemprop="description"
        content=" js promiseè¯¦è§£ ">
    <meta name="keywords" itemprop="keywords"
        content=" [js promise] ">
    <base href="https://gaoshanwomeng.github.io/">
    <link rel="shortcut icon" href="https://gaoshanwomeng.github.io/favicons//favicon.ico" type="image/x-icon">
    <link rel="icon" type="image/png" sizes="32x32" href="https://gaoshanwomeng.github.io/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://gaoshanwomeng.github.io/favicons/favicon-16x16.png">
    <link rel="canonical" href="https://gaoshanwomeng.github.io/post/js-promise%E8%AF%A6%E8%A7%A3/">
    <link rel="stylesheet" type="text/css" href="https://at.alicdn.com/t/font_2450869_iypnqhtzjei.css">
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="https://gaoshanwomeng.github.io/css/style.min.6e083dd09ee7ba1901688a2022668666ddb7e3f56711ffb52c74cc29315d95cd.css" integrity="sha256-bgg90J7nuhkBaIogImaGZt234/VnEf&#43;1LHTMKTFdlc0="
        type="text/css">
</head><body>
<div class="main animated fadeInDown">
  <div class="toc sub-container">
    <div class="toc-header">
        <span>ç›®å½•</span>
        <span id="read-percentage"></span>
    </div>
    <ul class="toc-h2"><li>
                    <a href="https://gaoshanwomeng.github.io/post/js-promise%E8%AF%A6%E8%A7%A3/#1-promise" class="toc-link">1. Promise</a>
                </li>
                <li>
                    <a href="https://gaoshanwomeng.github.io/post/js-promise%E8%AF%A6%E8%A7%A3/#2-promise-%e6%9e%84%e9%80%a0%e5%99%a8" class="toc-link">2. Promise æ„é€ å™¨</a>
                </li>
                <li>
                    <a href="https://gaoshanwomeng.github.io/post/js-promise%E8%AF%A6%E8%A7%A3/#3-promise-%e5%ae%9e%e4%be%8b%e6%96%b9%e6%b3%95" class="toc-link">3. Promise å®ä¾‹æ–¹æ³•</a>
                </li>
                
                        <ul class="toc-h3"><li>
                    <a href="https://gaoshanwomeng.github.io/post/js-promise%E8%AF%A6%E8%A7%A3/#1-promiseprototypethen" class="toc-link">1. Promise.prototype.then()</a>
                </li>
                <li>
                    <a href="https://gaoshanwomeng.github.io/post/js-promise%E8%AF%A6%E8%A7%A3/#2-promiseprototypecatch" class="toc-link">2. Promise.prototype.catch()</a>
                </li>
                <li>
                    <a href="https://gaoshanwomeng.github.io/post/js-promise%E8%AF%A6%E8%A7%A3/#3-promiseprototypefinally" class="toc-link">3. Promise.prototype.finally()</a>
                </li>
                
                        </ul><li>
                    <a href="https://gaoshanwomeng.github.io/post/js-promise%E8%AF%A6%E8%A7%A3/#4-promise-%e9%9d%99%e6%80%81%e6%96%b9%e6%b3%95" class="toc-link">4. Promise é™æ€æ–¹æ³•</a>
                </li>
                
                        <ul class="toc-h3"><li>
                    <a href="https://gaoshanwomeng.github.io/post/js-promise%E8%AF%A6%E8%A7%A3/#1-promiseall" class="toc-link">1. Promise.all</a>
                </li>
                </div><div class="single-post container">
    <div class="post">
      <div class="header">
        <span class="title">js promiseè¯¦è§£</span>
        
        <div class="info">
          <span>ğŸ“… 2021-07-10</span>
          <span>ğŸ‘¦ Tomtom Young</span>
          <span>ğŸ“– 5031å­—</span>
          <span>â± 11åˆ†é’Ÿ</span>
        </div>
        
      </div>
      <div class="content markdown-body">
        <h2 id="1-promise">1. Promise</h2>
<blockquote>
<p><a href="https://promisesaplus.com/">promise A+</a></p>
</blockquote>
<blockquote>
<p>A <em>promise</em> represents the eventual result of an asynchronous operation. The primary way of interacting with a promise is through its <code>then</code> method, which registers callbacks to receive either a promiseâ€™s eventual value or the reason why the promise cannot be fulfilled.</p>
</blockquote>
<p>promiseè¡¨ç¤ºå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆç»“æœã€‚ä¸promiseäº¤äº’çš„ä¸»è¦æ–¹å¼æ˜¯é€šè¿‡å®ƒçš„thenæ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ³¨å†Œå›è°ƒæ¥æ¥æ”¶promiseçš„æœ€ç»ˆå€¼æˆ–æ— æ³•å®ç°promiseçš„åŸå› ã€‚</p>
<blockquote>
<p><strong>Terminology</strong></p>
<ol>
<li>â€œpromiseâ€ is an object or function with a <code>then</code> method whose behavior conforms to this specification.</li>
<li>â€œthenableâ€ is an object or function that defines a <code>then</code> method.</li>
<li>â€œvalueâ€ is any legal JavaScript value (including <code>undefined</code>, a thenable, or a promise).</li>
<li>â€œexceptionâ€ is a value that is thrown using the <code>throw</code> statement.</li>
<li>â€œreasonâ€ is a value that indicates why a promise was rejected.</li>
</ol>
</blockquote>
<p><strong>æœ¯è¯­</strong></p>
<ol>
<li>â€œpromiseâ€æ˜¯ä¸€ä¸ªå¯¹è±¡æˆ–æ–¹æ³•ï¼Œå…¶è¡Œä¸ºç¬¦åˆæœ¬è§„èŒƒçš„è§„å®š</li>
<li>â€œthenableâ€ æ˜¯ä¸€ä¸ªè¢«å®šä¹‰ä¸ºthenå‡½æ•°çš„å¯¹è±¡æˆ–æ–¹æ³•</li>
<li>â€œvalueâ€ å¯ä»¥æ˜¯ä»»ä½•åˆæ³•çš„jså˜é‡ï¼ŒåŒ…æ‹¬undefinedã€thenableã€promise</li>
<li>â€œexceptionâ€ æ˜¯ä¸€ä¸ªä½¿ç”¨throwæŠ›å‡ºçš„å€¼</li>
<li>â€œreasonâ€ æ˜¯ä¸€ä¸ªç”¨æ¥è§£é‡Špromise rejectedçš„åŸå› çš„å€¼</li>
</ol>
<blockquote>
<p>A promise must be in one of three states: pending, fulfilled, or rejected.</p>
<ol>
<li>When pending, a promise:
<ol>
<li>may transition to either the fulfilled or rejected state.</li>
</ol>
</li>
<li>When fulfilled, a promise:
<ol>
<li>must not transition to any other state.</li>
<li>must have a value, which must not change.</li>
</ol>
</li>
<li>When rejected, a promise:
<ol>
<li>must not transition to any other state.</li>
<li>must have a reason, which must not change.</li>
</ol>
</li>
</ol>
<p>Here, â€œmust not changeâ€ means immutable identity (i.e. <code>===</code>), but does not imply deep immutability.</p>
</blockquote>
<p>ä¸€ä¸ªpromiseå¿…é¡»å¤„äºä¸‰ç§çŠ¶æ€ä¹‹ä¸€ï¼špending, fulfilled, rejected</p>
<ol>
<li>å½“å¤„äºpendingçŠ¶æ€æ—¶ï¼Œå¯èƒ½è½¬æ¢ä¸ºfulfilledæˆ–è€…rejectedçŠ¶æ€</li>
<li>å½“å¤„äºfulfilledçŠ¶æ€æ—¶ï¼Œä¸èƒ½å†è½¬æ¢ä¸ºå…¶ä»–çŠ¶æ€ï¼Œå¿…é¡»æœ‰ä¸€ä¸ªè¢«èµ‹äºˆä¸€ä¸ªä¸å¯æ›´æ”¹çš„å€¼</li>
<li>å½“å¤„äºrejectedçŠ¶æ€æ—¶ï¼Œä¸èƒ½å†è½¬æ¢ä¸ºå…¶ä»–çŠ¶æ€ï¼Œå¿…é¡»æŒ‡å®šä¸€ä¸ªä¸å¯æ”¹å˜çš„åŸå› </li>
</ol>
<p>è¿™é‡Œçš„ä¸å¯æ”¹å˜æŒ‡çš„æ˜¯èº«ä»½ä¸å˜ã€‚æŒ‡å‘çš„å†…å­˜åœ°å€ä¸å˜ã€‚</p>
<h2 id="2-promise-æ„é€ å™¨">2. Promise æ„é€ å™¨</h2>
<blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/Promise">MDN Promise Constructor</a></p>
</blockquote>
<p><strong><code>Promise</code></strong> æ„é€ å™¨ä¸»è¦ç”¨äºåŒ…è£…ä¸æ”¯æŒpromiseï¼ˆè¿”å›å€¼ä¸æ˜¯<code>Promise</code>ï¼‰çš„å‡½æ•°ã€‚</p>
<blockquote>
<p><strong>è¯­æ³•</strong></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Promise</span>(executor)
</code></pre></td></tr></table>
</div>
</div><p><strong>å‚æ•°</strong></p>
<ul>
<li><code>executor</code>
<ul>
<li>æ˜¯ä¸€ä¸ªåŒå‚å‡½æ•°ï¼Œå‚æ•°ä¸º<code>resolveå’Œreject</code>ã€‚</li>
<li><code>Promise</code>çš„å®ç°ä¼šç«‹å³æ‰§è¡Œ<code>executor</code>ï¼Œå¹¶ä¼ å…¥<code>resolveå’Œreject</code>å‡½æ•°ï¼ˆ<code>Promise</code>æ„é€ å™¨å°†ä¼šåœ¨è¿”å›æ–°å¯¹è±¡ä¹‹å‰<code>executor</code>ï¼‰ã€‚</li>
<li>å½“<code>resolve</code>å’Œ<code>reject</code>å‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä»¬åˆ†åˆ«å¯¹promiseæ‰§è¡Œ<code>resolve</code>å’Œ<code>reject</code>ã€‚</li>
<li><code>executor</code>é€šå¸¸ä¼šè§¦å‘ä¸€äº›å¼‚æ­¥è¿ç®—ï¼Œä¸€æ—¦è¿ç®—æˆåŠŸå®Œæˆï¼Œåˆ™<code>resolve</code>æ‰è¿™ä¸ªpromiseï¼Œå¦‚æœå‡ºé”™åˆ™<code>reject</code>æ‰ã€‚</li>
<li><strong>å¦‚æœ<code>executor</code>å‡½æ•°æ‰§è¡Œæ—¶æŠ›å‡ºå¼‚å¸¸ï¼ŒpromiseçŠ¶æ€ä¼šå˜ä¸º<code>rejected</code>ã€‚<code>executor</code>çš„è¿”å›å€¼ä¹Ÿä¼šè¢«å¿½ç•¥</strong>ã€‚</li>
</ul>
</li>
</ul>
<p><strong>ç¤ºä¾‹</strong></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#ff79c6">const</span> myFirstPromise <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Promise</span>((resolve, reject) =&gt; {
  <span style="color:#6272a4">// do something asynchronous which eventually calls either:
</span><span style="color:#6272a4"></span>  <span style="color:#6272a4">//
</span><span style="color:#6272a4"></span>  <span style="color:#6272a4">//   resolve(someValue)        // fulfilled
</span><span style="color:#6272a4"></span>  <span style="color:#6272a4">// or
</span><span style="color:#6272a4"></span>  <span style="color:#6272a4">//   reject(&#34;failure reason&#34;)  // rejected
</span><span style="color:#6272a4"></span>});
</code></pre></td></tr></table>
</div>
</div><p><strong>è¿”å›å€¼</strong></p>
<p>è¿”å›ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ã€‚</p>
</blockquote>
<h2 id="3-promise-å®ä¾‹æ–¹æ³•">3. Promise å®ä¾‹æ–¹æ³•</h2>
<blockquote>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/then">MDN promise</a></p>
</blockquote>
<h3 id="1-promiseprototypethen">1. Promise.prototype.then()</h3>
<p><code>then()</code> æ–¹æ³•è¿”å›ä¸€ä¸ª <code>Promiseå¯¹è±¡</code>ã€‚å®ƒæœ€å¤šéœ€è¦æœ‰ä¸¤ä¸ªå‚æ•°ï¼šPromise çš„æˆåŠŸå’Œå¤±è´¥æƒ…å†µçš„å›è°ƒå‡½æ•°ã€‚</p>
<blockquote>
<p><strong>è¯­æ³•</strong></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">p.then(onFulfilled[, onRejected]);

p.then(value =&gt; {
<span style="color:#6272a4">// fulfillment
</span><span style="color:#6272a4"></span>}, reason =&gt; {
<span style="color:#6272a4">// rejection
</span><span style="color:#6272a4"></span>});
</code></pre></td></tr></table>
</div>
</div><p><strong>å‚æ•°</strong></p>
<ul>
<li><code>onFulfilled</code> å¯é€‰
<ul>
<li>å½“ Promise å˜æˆæ¥å—çŠ¶æ€ï¼ˆfulfilledï¼‰æ—¶è°ƒç”¨çš„<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function"><code>å‡½æ•°</code></a>ã€‚</li>
<li>è¯¥å‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°ï¼Œå³æ¥å—çš„æœ€ç»ˆç»“æœï¼ˆthe fulfillment  valueï¼‰ã€‚</li>
<li><strong>å¦‚æœè¯¥å‚æ•°ä¸æ˜¯å‡½æ•°ï¼Œåˆ™ä¼šåœ¨å†…éƒ¨è¢«æ›¿æ¢ä¸º <code>(x) =&gt; x</code>ï¼Œå³åŸæ ·è¿”å› promise æœ€ç»ˆç»“æœçš„å‡½æ•°</strong></li>
</ul>
</li>
<li><code>onRejected</code> å¯é€‰
<ul>
<li>å½“ Promise å˜æˆæ‹’ç»çŠ¶æ€ï¼ˆrejectedï¼‰æ—¶è°ƒç”¨çš„<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function"><code>å‡½æ•°</code></a>ã€‚</li>
<li>è¯¥å‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°ï¼Œå³æ‹’ç»çš„åŸå› ï¼ˆ<code>rejection reason</code>ï¼‰ã€‚</li>
<li><strong>å¦‚æœè¯¥å‚æ•°ä¸æ˜¯å‡½æ•°ï¼Œåˆ™ä¼šåœ¨å†…éƒ¨è¢«æ›¿æ¢ä¸ºä¸€ä¸ª &ldquo;Thrower&rdquo; å‡½æ•° ã€‚</strong></li>
</ul>
</li>
</ul>
<p><strong>è¿”å›å€¼</strong></p>
<p>è¿”å›ä¸€ä¸ª <code>Promiseå¯¹è±¡</code>ï¼Œä½†æ˜¯æ–°Promiseå¯¹è±¡çš„çŠ¶æ€æ˜¯å’Œthençš„å›è°ƒå‡½æ•°ç›¸å…³çš„ã€‚</p>
<p>å½“ä¸€ä¸ª <code>Promise</code>å®Œæˆï¼ˆfulfilledï¼‰æˆ–è€…å¤±è´¥ï¼ˆrejectedï¼‰æ—¶ï¼Œè¿”å›å‡½æ•°ï¼ˆå¾®ä»»åŠ¡ï¼‰å°†è¢«å¼‚æ­¥è°ƒç”¨ï¼ˆç”±äº‹ä»¶å¾ªç¯å¾ªç¯æ¥è°ƒåº¦å®Œæˆï¼‰ã€‚å…·ä½“çš„è¿”å›å€¼ä¾æ®ä»¥ä¸‹è§„åˆ™è¿”å›ã€‚å¦‚æœ <code>then</code> ä¸­çš„å›è°ƒå‡½æ•°ï¼š</p>
<ul>
<li>returnäº†ä¸€ä¸ªå€¼
<ul>
<li>é‚£ä¹ˆ <code>then</code> è¿”å›çš„ Promise å°†ä¼šæˆä¸ºfulfilledçŠ¶æ€ï¼Œå¹¶ä¸”å°†è¿”å›çš„å€¼ä½œä¸ºæ¥å—çŠ¶æ€çš„å›è°ƒå‡½æ•°çš„å‚æ•°å€¼ã€‚</li>
</ul>
</li>
<li>æ²¡æœ‰returnä»»ä½•å€¼
<ul>
<li>é‚£ä¹ˆ <code>then</code> è¿”å›çš„ Promise å°†ä¼šæˆä¸ºfulfilledçŠ¶æ€ï¼Œå¹¶ä¸”è¯¥æ¥å—çŠ¶æ€çš„å›è°ƒå‡½æ•°çš„å‚æ•°å€¼ä¸º <code>undefined</code>ã€‚</li>
</ul>
</li>
<li>æŠ›å‡ºä¸€ä¸ªé”™è¯¯
<ul>
<li>é‚£ä¹ˆ <code>then</code> è¿”å›çš„ Promise å°†ä¼šæˆä¸ºrejectedçŠ¶æ€ï¼Œå¹¶ä¸”å°†æŠ›å‡ºçš„é”™è¯¯ä½œä¸ºæ‹’ç»çŠ¶æ€çš„å›è°ƒå‡½æ•°çš„å‚æ•°å€¼ã€‚</li>
</ul>
</li>
<li>è¿”å›ä¸€ä¸ªå·²ç»æ˜¯fulfilledçŠ¶æ€çš„ Promise
<ul>
<li>é‚£ä¹ˆ <code>then</code> è¿”å›çš„ Promise ä¹Ÿä¼šæˆä¸ºfulfilledçŠ¶æ€ï¼Œå¹¶ä¸”å°†é‚£ä¸ª Promise çš„fulfilledçŠ¶æ€çš„å›è°ƒå‡½æ•°çš„å‚æ•°å€¼ä½œä¸ºè¯¥è¢«è¿”å›çš„Promiseçš„fulfilledçŠ¶æ€å›è°ƒå‡½æ•°çš„å‚æ•°å€¼ã€‚</li>
</ul>
</li>
<li>è¿”å›ä¸€ä¸ªå·²ç»æ˜¯rejectedçŠ¶æ€çš„ Promise
<ul>
<li>é‚£ä¹ˆ <code>then</code> è¿”å›çš„ Promise ä¹Ÿä¼šæˆä¸ºrejectedçŠ¶æ€ï¼Œå¹¶ä¸”å°†é‚£ä¸ª Promise çš„rejectedçŠ¶æ€çš„å›è°ƒå‡½æ•°çš„å‚æ•°å€¼ä½œä¸ºè¯¥è¢«è¿”å›çš„Promiseçš„rejectedçŠ¶æ€å›è°ƒå‡½æ•°çš„å‚æ•°å€¼ã€‚</li>
</ul>
</li>
<li>è¿”å›ä¸€ä¸ªæœªå®šçŠ¶æ€ï¼ˆ<code>pending</code>ï¼‰çš„ Promise
<ul>
<li>é‚£ä¹ˆ <code>then</code> è¿”å› Promise çš„çŠ¶æ€ä¹Ÿæ˜¯æœªå®šçš„ï¼Œå¹¶ä¸”å®ƒçš„ç»ˆæ€ä¸é‚£ä¸ª Promise çš„ç»ˆæ€ç›¸åŒï¼›åŒæ—¶ï¼Œå®ƒå˜ä¸ºç»ˆæ€æ—¶è°ƒç”¨çš„å›è°ƒå‡½æ•°å‚æ•°ä¸é‚£ä¸ª Promise å˜ä¸ºç»ˆæ€æ—¶çš„å›è°ƒå‡½æ•°çš„å‚æ•°æ˜¯ç›¸åŒçš„ã€‚</li>
</ul>
</li>
</ul>
</blockquote>
<p>è¿™é‡Œæ¥é€šè¿‡ä»£ç å®é™…çœ‹ä¸€ä¸‹ï¼š</p>
<ol>
<li>returnäº†ä¸€ä¸ªå€¼</li>
</ol>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> promise1 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Promise</span>((resolve, reject)=&gt; {
    setTimeout(<span style="color:#bd93f9">_</span>=&gt;{
        resolve(<span style="color:#f1fa8c">&#39;resolve&#39;</span>);
    },<span style="color:#bd93f9">1000</span>)
})
<span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> promise1.then(res =&gt; {
    console.log(<span style="color:#f1fa8c">&#39;then1&#39;</span>, res);
    <span style="color:#ff79c6">return</span> <span style="color:#f1fa8c">&#39;then1&#39;</span>
}).then(res=&gt;{
    console.log(<span style="color:#f1fa8c">&#39;then2&#39;</span>, res);
    <span style="color:#ff79c6">return</span> <span style="color:#f1fa8c">&#39;then2&#39;</span>
})
<span style="color:#6272a4">// console output:
</span><span style="color:#6272a4">// then1 resolve
</span><span style="color:#6272a4">// then2 then1
</span><span style="color:#6272a4">// è¯´æ˜ä¸¤ä»¶äº‹ï¼š
</span><span style="color:#6272a4">// 1.è¿”å›çš„promiseå¯¹è±¡æ˜¯fulfilledçŠ¶æ€
</span><span style="color:#6272a4">// 2.returnçš„å€¼ä½œä¸ºè¿”å›çš„æ–°promiseçš„valueå€¼
</span></code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>æ²¡æœ‰returnä»»ä½•å€¼</li>
</ol>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> promise1 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Promise</span>((resolve, reject)=&gt; {
    setTimeout(<span style="color:#bd93f9">_</span>=&gt;{
        resolve(<span style="color:#f1fa8c">&#39;resolve&#39;</span>);
    },<span style="color:#bd93f9">1000</span>)
})
<span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> promise1.then(res =&gt; {
    console.log(<span style="color:#f1fa8c">&#39;then1&#39;</span>, res);
}).then(res=&gt;{
    console.log(<span style="color:#f1fa8c">&#39;then2&#39;</span>, res);
})
<span style="color:#6272a4">// console output:
</span><span style="color:#6272a4">// then1 resolve
</span><span style="color:#6272a4">// then2 undefined
</span><span style="color:#6272a4">// è¯´æ˜ï¼š
</span><span style="color:#6272a4">// 1.è¿”å›çš„promiseå¯¹è±¡æ˜¯fulfilledçŠ¶æ€
</span><span style="color:#6272a4">// 2.æ²¡æœ‰returnæ—¶ï¼Œvalueå€¼ä¸ºundefined
</span></code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>æŠ›å‡ºä¸€ä¸ªé”™è¯¯</li>
</ol>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> promise1 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Promise</span>((resolve, reject)=&gt; {
    setTimeout(<span style="color:#bd93f9">_</span>=&gt;{
        resolve(<span style="color:#f1fa8c">&#39;resolve&#39;</span>);
    },<span style="color:#bd93f9">1000</span>)
})
<span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> promise1.then(res =&gt; {
    console.log(<span style="color:#f1fa8c">&#39;then1&#39;</span>, res);
    <span style="color:#ff79c6">throw</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Error</span>(<span style="color:#f1fa8c">&#39;å‡ºé”™äº†&#39;</span>);
}).then(res=&gt;{
    console.log(<span style="color:#f1fa8c">&#39;then2&#39;</span>, res);
}, err=&gt;{
    console.log(<span style="color:#f1fa8c">&#39;err2&#39;</span>, err);
})
<span style="color:#6272a4">// console output:
</span><span style="color:#6272a4">// then1 resolve
</span><span style="color:#6272a4">// then2 Error: å‡ºé”™äº† at promise.html:18
</span><span style="color:#6272a4">// è¯´æ˜ï¼š
</span><span style="color:#6272a4">// 1.å¦‚æœåœ¨thençš„å›è°ƒå‡½æ•°ä¸­æŠ›å‡ºé”™è¯¯ï¼Œè¿”å›çš„promiseå¯¹è±¡æ˜¯rejectedçŠ¶æ€ï¼Œreasonä¸ºæŠ›å‡ºçš„é”™è¯¯
</span></code></pre></td></tr></table>
</div>
</div><ol start="4">
<li>è¿”å›ä¸€ä¸ªå·²ç»æ˜¯fulfilledçŠ¶æ€çš„ Promise</li>
</ol>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> promise1 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Promise</span>((resolve, reject)=&gt; {
    setTimeout(<span style="color:#bd93f9">_</span>=&gt;{
        resolve(<span style="color:#f1fa8c">&#39;resolve&#39;</span>);
    },<span style="color:#bd93f9">1000</span>)
})
<span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> promise1.then(res =&gt; {
    console.log(<span style="color:#f1fa8c">&#39;then1&#39;</span>, res);
    <span style="color:#ff79c6">return</span> <span style="color:#8be9fd;font-style:italic">Promise</span>.resolve(<span style="color:#f1fa8c">&#39;then1 promise&#39;</span>)
}).then(res=&gt;{
    console.log(<span style="color:#f1fa8c">&#39;then2&#39;</span>, res);
}, err=&gt;{
    console.log(<span style="color:#f1fa8c">&#39;err2&#39;</span>, err);
})
<span style="color:#6272a4">// console output:
</span><span style="color:#6272a4">// then1 resolve
</span><span style="color:#6272a4">// then2 then1 promise
</span><span style="color:#6272a4">// è¯´æ˜ï¼š
</span><span style="color:#6272a4">// 1.è¿”å›çš„æ˜¯ä¸€ä¸ªfulfilledçŠ¶æ€çš„promiseå¯¹è±¡
</span><span style="color:#6272a4">// 2.valueå€¼ä¸ºè¿”å›çš„fulfilledçŠ¶æ€çš„promiseå¯¹è±¡çš„valueå€¼ï¼Œç©¿é€äº†
</span></code></pre></td></tr></table>
</div>
</div><ol start="5">
<li>è¿”å›ä¸€ä¸ªå·²ç»æ˜¯rejectedçŠ¶æ€çš„ Promise</li>
</ol>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> promise1 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Promise</span>((resolve, reject)=&gt; {
    setTimeout(<span style="color:#bd93f9">_</span>=&gt;{
        resolve(<span style="color:#f1fa8c">&#39;resolve&#39;</span>);
    },<span style="color:#bd93f9">1000</span>)
})
<span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> promise1.then(res =&gt; {
    console.log(<span style="color:#f1fa8c">&#39;then1&#39;</span>, res);
    <span style="color:#ff79c6">return</span> <span style="color:#8be9fd;font-style:italic">Promise</span>.reject(<span style="color:#f1fa8c">&#39;then1 promise&#39;</span>)
}).then(res=&gt;{
    console.log(<span style="color:#f1fa8c">&#39;then2&#39;</span>, res);
}, err=&gt;{
    console.log(<span style="color:#f1fa8c">&#39;err2&#39;</span>, err);
})
<span style="color:#6272a4">// console output:
</span><span style="color:#6272a4">// then1 resolve
</span><span style="color:#6272a4">// err2 then1 promise
</span><span style="color:#6272a4">// è¯´æ˜ï¼š
</span><span style="color:#6272a4">// 1.è¿”å›çš„æ˜¯ä¸€ä¸ªrejectedçŠ¶æ€çš„promiseå¯¹è±¡
</span><span style="color:#6272a4">// 2.reasonå€¼ä¸ºè¿”å›çš„rejectedçŠ¶æ€çš„promiseå¯¹è±¡çš„reasonå€¼ï¼Œç©¿é€äº†
</span></code></pre></td></tr></table>
</div>
</div><ol start="6">
<li>è¿”å›ä¸€ä¸ªæœªå®šçŠ¶æ€ï¼ˆ<code>pending</code>ï¼‰çš„ Promise</li>
</ol>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> promise1 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Promise</span>((resolve, reject)=&gt; {
    resolve(<span style="color:#f1fa8c">&#39;resolve&#39;</span>);
})
<span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> promise1.then(res =&gt; {
    console.log(<span style="color:#f1fa8c">&#39;then1&#39;</span>, res);
    <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Promise</span>((resolve, reject)=&gt; {
        setTimeout(<span style="color:#bd93f9">_</span>=&gt;{
            resolve(<span style="color:#f1fa8c">&#39;resolve2&#39;</span>);
        }, <span style="color:#bd93f9">4000</span>)
    })
}).then(res=&gt;{
    console.log(<span style="color:#f1fa8c">&#39;then2&#39;</span>, res);
}, err=&gt;{
    console.log(<span style="color:#f1fa8c">&#39;err2&#39;</span>, err);
})
<span style="color:#6272a4">// console output:
</span><span style="color:#6272a4">// then1 resolve
</span><span style="color:#6272a4">// 4ç§’åè¾“å‡º
</span><span style="color:#6272a4">// then2 resolve2
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> promise1 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Promise</span>((resolve, reject)=&gt; {
    resolve(<span style="color:#f1fa8c">&#39;resolve&#39;</span>);
})
<span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> promise1.then(res =&gt; {
    console.log(<span style="color:#f1fa8c">&#39;then1&#39;</span>, res);
    <span style="color:#ff79c6">return</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Promise</span>((resolve, reject)=&gt; {
        setTimeout(<span style="color:#bd93f9">_</span>=&gt;{
            reject(<span style="color:#f1fa8c">&#39;resolve2&#39;</span>);
        }, <span style="color:#bd93f9">4000</span>)
    })
}).then(res=&gt;{
    console.log(<span style="color:#f1fa8c">&#39;then2&#39;</span>, res);
}, err=&gt;{
    console.log(<span style="color:#f1fa8c">&#39;err2&#39;</span>, err);
})
<span style="color:#6272a4">// console output:
</span><span style="color:#6272a4">// then1 resolve
</span><span style="color:#6272a4">// 4ç§’åè¾“å‡º
</span><span style="color:#6272a4">// err2 resolve2
</span><span style="color:#6272a4">// è¯´æ˜ï¼š
</span><span style="color:#6272a4">// 1.è¿”å›çš„æ˜¯ä¸€ä¸ªpendingçŠ¶æ€çš„promiseå¯¹è±¡
</span><span style="color:#6272a4">// 2.å½“pendingçš„promiseå˜ä¸ºrejectedæˆ–è€…fulfilledçš„æ—¶å€™ï¼Œä¼šè§¦å‘å¯¹åº”çš„å›è°ƒå‡½æ•°
</span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>æ³¨æ„</strong></p>
<ul>
<li>å¦‚æœå¿½ç•¥é’ˆå¯¹æŸä¸ªçŠ¶æ€çš„å›è°ƒå‡½æ•°å‚æ•°ï¼Œæˆ–è€…æä¾›éå‡½æ•° (nonfunction) å‚æ•°ï¼Œé‚£ä¹ˆ <code>then</code> æ–¹æ³•å°†ä¼šä¸¢å¤±å…³äºè¯¥çŠ¶æ€çš„å›è°ƒå‡½æ•°ä¿¡æ¯ï¼Œä½†æ˜¯å¹¶ä¸ä¼šäº§ç”Ÿé”™è¯¯ã€‚</li>
<li><strong>å¦‚æœè°ƒç”¨ <code>then</code> çš„ <code>Promise</code> çš„çŠ¶æ€ï¼ˆfulfillment æˆ– rejectionï¼‰å‘ç”Ÿæ”¹å˜ï¼Œä½†æ˜¯ <code>then</code> ä¸­å¹¶æ²¡æœ‰å…³äºè¿™ç§çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œé‚£ä¹ˆ <code>then</code> å°†åˆ›å»ºä¸€ä¸ªæ²¡æœ‰ç»è¿‡å›è°ƒå‡½æ•°å¤„ç†çš„æ–° <code>Promise</code> å¯¹è±¡ã€‚</strong></li>
<li><strong>è¿™ä¸ªæ–° <code>Promise</code> åªæ˜¯ç®€å•åœ°æ¥å—è°ƒç”¨è¿™ä¸ª <code>then</code> çš„åŸ <code>Promise</code> çš„ç»ˆæ€ä½œä¸ºå®ƒçš„ç»ˆæ€ã€‚</strong></li>
</ul>
</blockquote>
<h3 id="2-promiseprototypecatch">2. Promise.prototype.catch()</h3>
<p><code>catch()</code> æ–¹æ³•è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œå¹¶ä¸”å¤„ç†æ‹’ç»çš„æƒ…å†µã€‚å®ƒçš„è¡Œä¸ºä¸è°ƒç”¨<code>Promise.prototype.then(undefined, onRejected)</code>ç›¸åŒã€‚ (äº‹å®ä¸Š, <code>obj.catch(onRejected)</code>å†…éƒ¨å°±æ˜¯ <code>obj.then(undefined, onRejected)</code>)ã€‚</p>
<blockquote>
<p><strong>è¯­æ³•</strong></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">p.<span style="color:#ff79c6">catch</span>(onRejected);

p.<span style="color:#ff79c6">catch</span>(<span style="color:#8be9fd;font-style:italic">function</span>(reason) {
   <span style="color:#6272a4">// æ‹’ç»
</span><span style="color:#6272a4"></span>});
</code></pre></td></tr></table>
</div>
</div><p><strong>å‚æ•°</strong></p>
<ul>
<li>
<p>onRejected</p>
<p>å½“Promise è¢«rejectedæ—¶,è¢«è°ƒç”¨çš„ä¸€ä¸ª<code>Function</code>ã€‚ è¯¥å‡½æ•°æ‹¥æœ‰ä¸€ä¸ªå‚æ•°reasonï¼Œè¡¨ç¤ºrejection çš„åŸå› ã€‚</p>
</li>
<li>
<p>catchä¸thenåŸºæœ¬ç›¸åŒ</p>
</li>
</ul>
<p><strong>è¿”å›å€¼</strong></p>
<p>ä¸€ä¸ª<code>Promiseå¯¹è±¡</code>ã€‚</p>
</blockquote>
<h3 id="3-promiseprototypefinally">3. Promise.prototype.finally()</h3>
<p><code>finally()</code> æ–¹æ³•è¿”å›ä¸€ä¸ª<code>Promiseå¯¹è±¡</code>ã€‚åœ¨promiseç»“æŸæ—¶ï¼Œæ— è®ºç»“æœæ˜¯fulfilledæˆ–è€…æ˜¯rejectedï¼Œéƒ½ä¼šæ‰§è¡ŒæŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚è¿™ä¸ºåœ¨<code>Promise</code>æ˜¯å¦æˆåŠŸå®Œæˆåéƒ½éœ€è¦æ‰§è¡Œçš„ä»£ç æä¾›äº†ä¸€ç§æ–¹å¼ã€‚</p>
<p>è¿™é¿å…äº†åŒæ ·çš„è¯­å¥éœ€è¦åœ¨<code>then()</code>å’Œ<code>catch()</code>ä¸­å„å†™ä¸€æ¬¡çš„æƒ…å†µã€‚</p>
<blockquote>
<p><strong>è¯­æ³•</strong></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js">p.<span style="color:#ff79c6">finally</span>(onFinally);

p.<span style="color:#ff79c6">finally</span>(<span style="color:#8be9fd;font-style:italic">function</span>() {
   <span style="color:#6272a4">// è¿”å›çŠ¶æ€ä¸º(resolved æˆ– rejected)
</span><span style="color:#6272a4"></span>});
</code></pre></td></tr></table>
</div>
</div><p><strong>å‚æ•°</strong></p>
<ul>
<li>
<p>onFinally</p>
<p><code>Promise</code> ç»“æŸåè°ƒç”¨çš„<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Function"><code>Function</code></a>ã€‚</p>
</li>
</ul>
<p><strong>è¿”å›å€¼</strong></p>
<p>ä¸€ä¸ª<code>Promiseå¯¹è±¡</code>ã€‚</p>
</blockquote>
<blockquote>
<p><strong>æ³¨æ„</strong></p>
<p><code>finally()</code> è™½ç„¶ä¸ <code>.then(onFinally, onFinally)</code> ç±»ä¼¼ï¼Œå®ƒä»¬ä¸åŒçš„æ˜¯ï¼š</p>
<ul>
<li>ç”±äºæ— æ³•çŸ¥é“<code>promise</code>çš„æœ€ç»ˆçŠ¶æ€ï¼Œæ‰€ä»¥<code>finally</code>çš„å›è°ƒå‡½æ•°ä¸­ä¸æ¥æ”¶ä»»ä½•å‚æ•°ï¼Œå®ƒä»…ç”¨äºæ— è®ºæœ€ç»ˆç»“æœå¦‚ä½•éƒ½è¦æ‰§è¡Œçš„æƒ…å†µã€‚</li>
<li>ä¸<code>Promise.resolve(2).then(() =&gt; {}, () =&gt; {})</code> ï¼ˆresolvedçš„ç»“æœä¸º<code>undefined</code>ï¼‰ä¸åŒï¼Œ<code>Promise.resolve(2).finally(() =&gt; {})</code> resolvedçš„ç»“æœä¸º <code>2</code>ã€‚</li>
<li>åŒæ ·ï¼Œ<code>Promise.reject(3).then(() =&gt; {}, () =&gt; {})</code> (fulfilledçš„ç»“æœä¸º<code>undefined</code>), <code>Promise.reject(3).finally(() =&gt; {})</code> rejected çš„ç»“æœä¸º <code>3</code>ã€‚</li>
</ul>
</blockquote>
<p>è¿™é‡Œæ¥é€šè¿‡ä»£ç å®é™…çœ‹ä¸€ä¸‹ï¼š</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> promise1 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Promise</span>((resolve, reject)=&gt; {
    resolve(<span style="color:#f1fa8c">&#39;resolve&#39;</span>);
})
<span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> promise1.then( res =&gt; {
    console.log(<span style="color:#f1fa8c">&#39;then1&#39;</span>, res);
    <span style="color:#ff79c6">return</span> <span style="color:#f1fa8c">&#39;then1&#39;</span>
}).<span style="color:#ff79c6">finally</span>( res =&gt;{
    console.log(<span style="color:#f1fa8c">&#39;finally&#39;</span>, res);
}).then(res =&gt; {
    console.log(<span style="color:#f1fa8c">&#39;then2&#39;</span>, res);
})
<span style="color:#6272a4">// console output:
</span><span style="color:#6272a4">// then1 resolve
</span><span style="color:#6272a4">// finally undefined
</span><span style="color:#6272a4">// then2 then1
</span><span style="color:#6272a4">// è¯´æ˜ï¼š
</span><span style="color:#6272a4">// 1.finallyä¸æ¥æ”¶ä»»ä½•å‚æ•°
</span><span style="color:#6272a4">// 2.åé¢çš„thenå¯ä»¥ç©¿é€finallyæ¥æ”¶å‰ä¸€å±‚çš„promiseå¯¹è±¡
</span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœfinallyé‡Œè¿”å›äº†å€¼ï¼Œä¼šå‡ºç°ä»€ä¹ˆæƒ…å†µï¼Ÿ</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> promise1 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Promise</span>((resolve, reject)=&gt; {
    resolve(<span style="color:#f1fa8c">&#39;resolve&#39;</span>);
})
<span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> promise1.then( res =&gt; {
    console.log(<span style="color:#f1fa8c">&#39;then1&#39;</span>, res);
    <span style="color:#ff79c6">return</span> <span style="color:#f1fa8c">&#39;then1&#39;</span>
}).<span style="color:#ff79c6">finally</span>( res =&gt;{
    console.log(<span style="color:#f1fa8c">&#39;finally&#39;</span>, res);
    <span style="color:#ff79c6">return</span> <span style="color:#f1fa8c">&#39;finally&#39;</span>
}).then(res =&gt; {
    console.log(<span style="color:#f1fa8c">&#39;then2&#39;</span>, res);
})
<span style="color:#6272a4">// console output:
</span><span style="color:#6272a4">// then1 resolve
</span><span style="color:#6272a4">// finally undefined
</span><span style="color:#6272a4">// then2 then1
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> promise1 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Promise</span>((resolve, reject)=&gt; {
    resolve(<span style="color:#f1fa8c">&#39;resolve&#39;</span>);
})
<span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> promise1.then( res =&gt; {
    console.log(<span style="color:#f1fa8c">&#39;then1&#39;</span>, res);
    <span style="color:#ff79c6">return</span> <span style="color:#f1fa8c">&#39;then1&#39;</span>
}).<span style="color:#ff79c6">finally</span>( res =&gt;{
    console.log(<span style="color:#f1fa8c">&#39;finally&#39;</span>, res);
    <span style="color:#ff79c6">return</span> <span style="color:#8be9fd;font-style:italic">Promise</span>.resolve(<span style="color:#f1fa8c">&#39;finally&#39;</span>);
}).then(res =&gt; {
    console.log(<span style="color:#f1fa8c">&#39;then2&#39;</span>, res);
})
<span style="color:#6272a4">// console output:
</span><span style="color:#6272a4">// then1 resolve
</span><span style="color:#6272a4">// finally undefined
</span><span style="color:#6272a4">// then2 then1
</span></code></pre></td></tr></table>
</div>
</div><p>æ˜¯ä¸æ˜¯finallyä¸åœ¨promiseçš„è°ƒç”¨é“¾ä¸­ï¼Œä¸‹ä¸€å±‚æ¥æ”¶çš„æ°¸è¿œæ˜¯ä¸Šä¸€å±‚è¿”å›çš„Promiseå¯¹è±¡ï¼Ÿ</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#8be9fd;font-style:italic">let</span> promise1 <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Promise</span>((resolve, reject)=&gt; {
    resolve(<span style="color:#f1fa8c">&#39;resolve&#39;</span>);
})
<span style="color:#8be9fd;font-style:italic">let</span> result <span style="color:#ff79c6">=</span> promise1.then( res =&gt; {
    console.log(<span style="color:#f1fa8c">&#39;then1&#39;</span>, res);
}).<span style="color:#ff79c6">finally</span>( res =&gt;{
    console.log(<span style="color:#f1fa8c">&#39;finally&#39;</span>, res);
    <span style="color:#ff79c6">return</span> <span style="color:#8be9fd;font-style:italic">Promise</span>.resolve(<span style="color:#f1fa8c">&#39;finally&#39;</span>);
}).then(res =&gt; {
    console.log(<span style="color:#f1fa8c">&#39;then2&#39;</span>, res);
})
<span style="color:#6272a4">// console output:
</span><span style="color:#6272a4">// then1 resolve
</span><span style="color:#6272a4">// finally undefined
</span><span style="color:#6272a4">// then2 undefined
</span><span style="color:#6272a4">// æ›´æ”¹äº†å‰ä¸€å±‚è¿”å›çš„promiseï¼Œä¸‹ä¸€å±‚ä¹Ÿæ¥æ”¶ä¸åˆ°äº†ï¼ŒåŸºæœ¬å¯ä»¥åˆ¤å®šfinallyä¸åœ¨promiseçš„è°ƒç”¨é“¾ä¸­ï¼Œæˆ–è€…è¯´è¢«ç©¿é€äº†
</span></code></pre></td></tr></table>
</div>
</div><h2 id="4-promise-é™æ€æ–¹æ³•">4. Promise é™æ€æ–¹æ³•</h2>
<blockquote>
<p><a href="https://zh.javascript.info/promise-api">promise api</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise">MDN Promise</a></p>
</blockquote>
<p>åœ¨ <code>Promise</code> ç±»ä¸­ï¼Œæœ‰ 5 ç§é™æ€æ–¹æ³•ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œç®€å•ä»‹ç»ä¸‹å®ƒä»¬çš„ä½¿ç”¨åœºæ™¯ã€‚</p>
<h3 id="1-promiseall">1. Promise.all</h3>
<ul>
<li>Promise.all() æ–¹æ³•æ¥æ”¶ä¸€ä¸ªpromiseçš„iterableç±»å‹ï¼ˆæ³¨ï¼šArrayï¼ŒMapï¼ŒSetéƒ½å±äºES6çš„iterableç±»å‹ï¼‰çš„è¾“å…¥</li>
<li>è¿”å›ä¸€ä¸ª<code>Promise</code>å®ä¾‹ï¼Œ è¾“å…¥çš„æ‰€æœ‰promiseçš„resolveå›è°ƒçš„ç»“æœç»„æˆä¸€ä¸ªæ•°ç»„ï¼Œä½œä¸ºè¿™ä¸ªPromiseçš„fulfilledçš„value</li>
<li>æ•°ç»„é‡ŒæŒ‰é¡ºåºå­˜å‚¨äº†æ¯ä¸€ä¸ªPromiseçš„fulfilledçš„valueå€¼ï¼Œè¿™ä¸ªé¡ºåºæ˜¯è¾“å…¥æ—¶çš„é¡ºåºï¼Œè€Œä¸æ˜¯resolveçš„æ—¶é—´é¡ºåº</li>
<li>è¿™ä¸ª<code>Promise</code>çš„resolveå›è°ƒæ‰§è¡Œæ˜¯åœ¨æ‰€æœ‰è¾“å…¥çš„promiseçš„resolveå›è°ƒéƒ½ç»“æŸï¼Œæˆ–è€…è¾“å…¥çš„iterableé‡Œæ²¡æœ‰promiseäº†çš„æ—¶å€™</li>
<li>å®ƒçš„rejectå›è°ƒæ‰§è¡Œæ˜¯ï¼Œåªè¦ä»»ä½•ä¸€ä¸ªè¾“å…¥çš„promiseçš„rejectå›è°ƒæ‰§è¡Œæˆ–è€…è¾“å…¥ä¸åˆæ³•çš„promiseå°±ä¼šç«‹å³æŠ›å‡ºé”™è¯¯ï¼Œå¹¶ä¸”rejectçš„æ˜¯ç¬¬ä¸€ä¸ªæŠ›å‡ºçš„é”™è¯¯ä¿¡æ¯</li>
<li>å‡è®¾æˆ‘ä»¬å¸Œæœ›å¹¶è¡Œæ‰§è¡Œå¤šä¸ª promiseï¼Œå¹¶ç­‰å¾…æ‰€æœ‰ promise éƒ½å‡†å¤‡å°±ç»ªã€‚è¿™å°±æ˜¯ <code>Promise.all</code> çš„ç”¨é€”</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼Œç»“æœæ•°ç»„ä¸­å…ƒç´ çš„é¡ºåºä¸å…¶åœ¨æº promise ä¸­çš„é¡ºåºç›¸åŒã€‚å³ä½¿ç¬¬ä¸€ä¸ª promise èŠ±è´¹äº†æœ€é•¿çš„æ—¶é—´æ‰ resolveï¼Œä½†å®ƒä»æ˜¯ç»“æœæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªã€‚</p>
</blockquote>
<blockquote>
<p><strong>å…¶ä»–</strong></p>
<p>ä¸€ä¸ªå¸¸è§çš„æŠ€å·§æ˜¯ï¼Œå°†ä¸€ä¸ªä»»åŠ¡æ•°æ®æ•°ç»„æ˜ å°„ï¼ˆmapï¼‰åˆ°ä¸€ä¸ª promise æ•°ç»„ï¼Œç„¶åå°†å…¶åŒ…è£…åˆ° <code>Promise.all</code>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªå­˜å‚¨ URL çš„æ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥åƒè¿™æ · fetch å®ƒä»¬ï¼š</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#8be9fd;font-style:italic">let</span> urls <span style="color:#ff79c6">=</span> [
  <span style="color:#f1fa8c">&#39;https://api.github.com/users/iliakan&#39;</span>,
  <span style="color:#f1fa8c">&#39;https://api.github.com/users/remy&#39;</span>,
  <span style="color:#f1fa8c">&#39;https://api.github.com/users/jeresig&#39;</span>
];

<span style="color:#6272a4">// å°†æ¯ä¸ª url æ˜ å°„ï¼ˆmapï¼‰åˆ° fetch çš„ promise ä¸­
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">let</span> requests <span style="color:#ff79c6">=</span> urls.map(url =&gt; fetch(url));

<span style="color:#6272a4">// Promise.all ç­‰å¾…æ‰€æœ‰ä»»åŠ¡éƒ½ resolved
</span><span style="color:#6272a4"></span><span style="color:#8be9fd;font-style:italic">Promise</span>.all(requests)
  .then(responses =&gt; responses.forEach(
    response =&gt; alert(<span style="color:#f1fa8c">`</span><span style="color:#f1fa8c">${</span>response.url<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">: </span><span style="color:#f1fa8c">${</span>response.status<span style="color:#f1fa8c">}</span><span style="color:#f1fa8c">`</span>)
  ));
</code></pre></td></tr></table>
</div>
</div></blockquote>
<p>è¿™é‡Œçš„ç¬¬äºŒä¸ª promise åœ¨ä¸¤ç§’å rejectã€‚è¿™ç«‹å³å¯¼è‡´äº† <code>Promise.all</code> çš„ rejectï¼Œå› æ­¤ <code>.catch</code> æ‰§è¡Œäº†ï¼šè¢« reject çš„ error æˆä¸ºäº†æ•´ä¸ª <code>Promise.all</code> çš„ç»“æœã€‚</p>
<p><strong><code>Promise.all(iterable)</code> å…è®¸åœ¨ <code>iterable</code> ä¸­ä½¿ç”¨ non-promise çš„â€œå¸¸è§„â€å€¼</strong></p>
<blockquote>
<ul>
<li><code>Promise.all(...)</code> æ¥å—å«æœ‰ promise é¡¹çš„å¯è¿­ä»£å¯¹è±¡ï¼ˆå¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯æ•°ç»„ï¼‰ä½œä¸ºå‚æ•°ã€‚</li>
<li>å¦‚æœè¿™äº›å¯¹è±¡ä¸­çš„ä»»ä½•ä¸€ä¸ªä¸æ˜¯ promiseï¼Œé‚£ä¹ˆå®ƒå°†è¢«â€œæŒ‰åŸæ ·â€ä¼ é€’ç»™ç»“æœæ•°ç»„ã€‚</li>
</ul>
</blockquote>
<p>ä¾‹å¦‚ï¼Œè¿™é‡Œçš„ç»“æœæ˜¯ <code>[1, 2, 3]</code>ï¼š</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#8be9fd;font-style:italic">Promise</span>.all([
  <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Promise</span>((resolve, reject) =&gt; {
    setTimeout(() =&gt; resolve(<span style="color:#bd93f9">1</span>), <span style="color:#bd93f9">1000</span>)
  }),
  <span style="color:#bd93f9">2</span>,
  <span style="color:#bd93f9">3</span>
]).then(alert); 
<span style="color:#6272a4">// 1, 2, 3
</span></code></pre></td></tr></table>
</div>
</div>
      </div>
      <div class="footer">
        <span><a class="category" href="https://gaoshanwomeng.github.io/%20categories/%E5%89%8D%E7%AB%AF/">å‰ç«¯</a></span>
        <span><a class="tag" href="https://gaoshanwomeng.github.io/%20tags/js/">#js</a></span>
        
      </div>
    </div>

    <ul class="menu">
    <li class="menu-item">
        <a href="https://gaoshanwomeng.github.io/" id="back-btn">
            <i class="iconfont icon-home item-btn"></i>
        </a>
    </li>
    <li class="menu-item">
        <a href="javascript:void(0);" id="back-top-btn">
            <i class="iconfont icon-top item-btn"></i>
        </a>
    </li>
    <li class="menu-item">
        <a href="javascript:void(0);" id="switch-btn">
            <i class="iconfont icon-switch item-btn"></i>
        </a>
    </li>
    <li class="menu-item">
        <a href="javascript:void(0);" id="search-btn">
            <i class="iconfont icon-search item-btn"></i>
        </a>
    </li>
    <li class="menu-item">
        
        <a class="" href="https://gaoshanwomeng.github.io/post/js-%E4%BD%9C%E7%94%A8%E5%9F%9F%E4%B8%8E%E4%BD%9C%E7%94%A8%E5%9F%9F%E9%93%BE/" data-tooltip="js ä½œç”¨åŸŸ&amp;ä½œç”¨åŸŸé“¾&amp;é—­åŒ…">
            <i class="iconfont icon-left item-btn"></i>
            
        </a>
    </li>
    <li class="menu-item">
        
        <a class="" href="https://gaoshanwomeng.github.io/post/xsscsrf/" data-tooltip="xss&amp;csrf">
            <i class="iconfont icon-right item-btn"></i>
            
        </a>
    </li>
</ul>

  </div>
</div>

<div class="search-container animated fadeInShow">
    <input type="search" class="docsearch-input search-input" placeholder="æœç´¢å…³é”®è¯" />
    <div  id="loading" class="loading-container">
        <span>æœç´¢ä¸­...</span>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript">
    docsearch({
        apiKey: 'f7f9aeb8485880cfd0e747129ea4ddf9',
        indexName: 'blogsearch',
        appId: 'SGIZDO9IMB',
        inputSelector: '.docsearch-input',
        debug: true,
        algoliaOptions: {
            hitsPerPage: 50
        },
        
        
        
        queryHook: (query) => {
            $('#loading').css('display', 'flex');
        },
        transformData: (tips) => {
            $('#loading').css('display', 'none');
        }
    })
</script>
        <div class="cover animated fadeInShow"></div>
    </body>



<script type="text/javascript" src="https://gaoshanwomeng.github.io/js/util.min.da7e47b665999e07c5a344e11c6f24a0b4e054e6852c2e7f63ad44b11cf66a31ff68afeab35c9ffa81638300fab806f4e67d9699e5e66cea8b22ad4ca61da908.js" integrity=""></script>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-168042857-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></html>
