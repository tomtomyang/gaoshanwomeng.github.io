<!DOCTYPE html>
<html lang="zh-cn" data-theme="light"><head>
  <meta name="google-site-verification" content="kw1N-Xm6qEr1c9PGuRd0U_T6DXkw_EHsLyz5LpuDDv8" />
  <meta name="msvalidate.01" content="EE98205D30806C22C519683EFC53E9BA" />
  <meta name="baidu-site-verification" content="iPC3wUcQLL" />
  <title>关于字体的研究</title>
  <meta charset="utf-8" /><meta name="generator" content="Hugo 0.74.3" /><meta name="viewport" content="width=device-width,initial-scale=1, minimum-scale=1, maximum-scale=1" />
  <meta name="description" itemprop="description"
    content="关于字体的研究" />
  <meta name="keywords" itemprop="keywords"
    content="[字体 css]" />
  <base href="https://tomtomyoung.top/" />

  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link rel="preload prefetch" as="style" href="https://fonts.googleapis.com/css?family=Noto+Serif+SC&display=swap" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Serif+SC&display=swap" media="print"
    onload="this.media='all'">

  
  <link rel="shortcut icon" href="https://tomtomyoung.top/favicons//favicon.ico" type="image/x-icon" />
  <link rel="icon" type="image/png" sizes="32x32" href="https://tomtomyoung.top/favicons/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="https://tomtomyoung.top/favicons/favicon-16x16.png" />
  <link rel="mask-icon" href="https://tomtomyoung.top/favicons/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="apple-touch-icon" sizes="180x180" href="https://tomtomyoung.top/favicons/apple-touch-icon.png">
  <meta name="msapplication-TileColor" content="#00aba9">
  <meta name="msapplication-TileImage" content="https://tomtomyoung.top/favicons/mstile-144x144.png">
  <link rel="manifest" href="https://tomtomyoung.top/manifest.json">

  
  <link rel="canonical" href="https://tomtomyoung.top/post/%E5%85%B3%E4%BA%8E%E5%AD%97%E4%BD%93%E7%9A%84%E7%A0%94%E7%A9%B6/" />
  <link rel="stylesheet" type="text/css" href="https://at.alicdn.com/t/font_2450869_5vzvggza71i.css" />
  
  
  
  
  
  
  
  
  
  <link rel="stylesheet" href="https://tomtomyoung.top/css/style.min.css" integrity="" type="text/css" />

  
  
  
  <script type="text/javascript" src="https://tomtomyoung.top/js/docsearch.min.js" integrity=""></script>
</head><body>
<div class="main"><div class="percentage_container">
    <div class="percentage" id="percentage"></div>
</div><div class="toc sub-container">
    <div class="toc-header animated fadeInDown">
        <span>目录</span>
    </div><ul class="toc-h2 animated fadeInDown"><li>
                <span class="toc-link">1. 字体的设置</span>
            </li>
            
                    <ul class="toc-h3"><li>
                <span class="toc-link">1. font-family</span>
            </li>
            <li>
                <span class="toc-link">2. font-size</span>
            </li>
            <li>
                <span class="toc-link">3. font-weight</span>
            </li>
            <li>
                <span class="toc-link">4. font-style</span>
            </li>
            
                    </ul><li>
                <span class="toc-link">2. 加载网络字体</span>
            </li>
            
                    <ul class="toc-h3"><li>
                <span class="toc-link">1. @font-face</span>
            </li>
            
                    <ul class="toc-h4"><li>
                <span class="toc-link">1. 本质是变量</span>
            </li>
            <li>
                <span class="toc-link">2. 常用属性</span>
            </li>
            
                    <ul class="toc-h5"><li>
                <span class="toc-link">1. font-family</span>
            </li>
            <li>
                <span class="toc-link">2. src</span>
            </li>
            <li>
                <span class="toc-link">3. font-style</span>
            </li>
            <li>
                <span class="toc-link">4. font-weight</span>
            </li>
            <li>
                <span class="toc-link">5. unicode-range</span>
            </li>
            
                    </ul>
                    </ul><li>
                <span class="toc-link">2. link</span>
            </li>
            
                    <ul class="toc-h4"><li>
                <span class="toc-link">1. link标签的属性</span>
            </li>
            <li>
                <span class="toc-link">2. 渲染阻塞字体</span>
            </li>
            <li>
                <span class="toc-link">3. 载入字体的最佳实践</span>
            </li>
            
                    </ul>
                    </ul><li>
                <span class="toc-link">3. 盘古之白</span>
            </li>
            </div><div class="single-post container">
    <div class="post animated fadeInDown">
      <div class="header">
        <span class="title">关于字体的研究</span>
        
          <div class="info">
            <span>发布于2022-05-11</span>
            <span>更新于2022-05-11</span>
            <span>共8635字</span>
            <span>阅读18分钟</span>

          </div>
        
      </div>
      <div class="content markdown-body">
        <blockquote>
<p>参考：</p>
<p><a href="https://io-oi.me/tech/loading-google-fonts-async/">简单实现 Google Fonts 的异步加载</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Learn/CSS/Styling_text/Web_fonts">MDN_Web字体</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/font-family">MDN_font-family</a></p>
<p><a href="https://ridiqulous.com/chinese-webfont-guide/">中文网页字体设置方案：从 font-family 到 font-display</a></p>
<p><a href="https://blog.jsonfeed.cn/load-web-fonts-best-practice/">加载 Web Fonts 最佳实践</a></p>
<p><a href="https://www.zhangxinxu.com/wordpress/2017/03/css3-font-face-src-local/">真正了解CSS3背景下的@font face规则</a></p>
<p><a href="https://juejin.cn/post/6971640926389141518">HTML5 之 Link 标签</a></p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/link">MDN_link</a></p>
<p><a href="https://github.com/vinta/pangu.js/blob/master/README.md">為什麼你們就是不能加個空格呢？</a></p>
<p><a href="https://kknews.cc/news/om824r6.html">写作好习惯之「盘古之白」</a></p>
</blockquote>
<p>字体无处不在，无论是阅读网页，还是编辑Word文档，甚至是编写代码，我们都需要使用到字体，包括中文字体和英文字体。使用不同的字体会带来完全不同的阅读体验，为了构造更美观的网页效果，提高网页的阅读体验，本篇文章对Web中的字体展开研究。</p>
<h2 id="1-字体的设置">1. 字体的设置</h2>
<h3 id="1-font-family">1. font-family</h3>
<p>应用到HTML的字体可以使用 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/font-family"><code>font-family</code></a>属性来控制。CSS 属性 <code>font-family</code> 允许您通过给定一个有先后顺序的，由字体名或者字体族名组成的列表来为选定的元素设置字体。浏览器会在列表中搜寻，直到找到它所运行的系统上可用的字体。</p>
<blockquote>
<p><code>font-family</code> 属性指定的是一个优先级从高到低的可选字体列表。 字体的选定不是在发现用户计算机上安装的列表中的第一个字体时停止。相反，对字体的选择是逐字进行的。也就是说即使某个字符周围都在某个字体中可以显示，但该字符在当前的字体文件中没有适合的图形，那么会继续尝试列表中靠后的字体。当一个字体只在某些特定的 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-style">font-style (en-US)</a>、 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-variant">font-variant (en-US)</a>、或 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/font-size">font-size (en-US)</a> 属性值下有效时，这些属性的值也可能对字体族 font family 的选择造成影响。</p>
</blockquote>
<blockquote>
<ul>
<li>英文字体在前，中文字体在后。原因很简单，中文字体包中通常包含了英文字符，反之则不成立，如果先设置了中文字体，那么英文字体根本轮不到 fallback</li>
<li>操作系统方面，Apple 系列（macOS + iOS）字体在前（直接用 <code>-apple-system</code> 即可，见下文），Windows 字体在后。<a href="https://ruby-china.org/topics/14005">这里</a>解释了原因，即，macOS 下的用户有一定概率安装了 Windows 字体（因为安装了 Office），而 Windows 下安装 macOS 字体的用户却少之又少，所以如果 Windows 在前，那么在 macOS 下很有可能就出现「放着苹方不用却用微软雅黑」这种坑爹情况</li>
<li>根据访问网站的用户群体不同，可以考虑放弃对于老旧操作系统和浏览器的支持，比如我在使用思源宋体的时候，仅提供了 .woff 和 .woff2 格式的字体文件，完全放弃了老版本的 IE 和 Safari</li>
<li>仅对 Windows 用户使用自定义字体，比如思源系列，macOS、iOS、Linux 就使用系统自带字体就好。原因嘛当然是因为 Windows 自带的中文字体实在找不到好看的，而主动安装字体的用户毕竟还是少数（嗯这条是私货 🙄 ）</li>
<li>衬线还是非衬线完全看个人审美喜好，比如我就不觉得思源黑体系列好看（所以你现在看到的思源宋体，如果你是 Windows 用户的话）。同时，中文衬线搭配英文非衬线，或者反过来，中文非衬线搭配英文衬线，也完全没有问题</li>
</ul>
</blockquote>
<p>对于传统的web开发人员来说，字体选择是有限的。只有少数几种字体可以保证兼容所有流行的操作系统——这就是所谓的 <a href="https://developer.mozilla.org/en-US/docs/Learn/CSS/Styling_text/Fundamentals#web_safe_fonts">Web-safe 字体</a>。您可以使用字体堆栈来指定可选择的字体，后面是Web-safe的替代选项，然后是默认的系统字体，但是为了确保您的设计在每种字体中都显示正常，这样增加了测试的开销。</p>
<p>哈哈哈</p>
<h3 id="2-font-size">2. font-size</h3>
<p><code>font-size</code> <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS">CSS</a> 属性指定字体的大小。因为该属性的值会被用于计算em和ex长度单位，定义该值可能改变其他元素的大小。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#6272a4">/* &lt;absolute-size&gt;，绝对大小值 */</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#ff79c6">font-size</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">xx-small</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#ff79c6">font-size</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">x-small</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span style="color:#ff79c6">font-size</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">small</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span style="color:#ff79c6">font-size</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">medium</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span style="color:#ff79c6">font-size</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">large</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span style="color:#ff79c6">font-size</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">x-large</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span style="color:#ff79c6">font-size</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">xx-large</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span style="color:#6272a4">/* &lt;relative-size&gt;，相对大小值 */</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span style="color:#ff79c6">font-size</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">larger</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span style="color:#ff79c6">font-size</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">smaller</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span style="color:#6272a4">/* &lt;length&gt;，长度值 */</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#ff79c6">font-size</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">12px</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span style="color:#ff79c6">font-size</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">0</span>.<span style="color:#50fa7b">8em</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span style="color:#6272a4">/* &lt;percentage&gt;，百分比值 */</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span style="color:#ff79c6">font-size</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">80</span><span style="color:#ff79c6">%;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span style="color:#ff79c6">font-size</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">inherit</span><span style="color:#ff79c6">;</span>
</code></pre></div><h3 id="3-font-weight">3. font-weight</h3>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/font-weight"><code>font-weight</code></a> <a href="https://developer.mozilla.org/en-US/docs/Web/CSS">CSS</a> 属性指定了字体的粗细程度。 一些字体只提供 <code>normal</code> 和 <code>bold</code> 两种值。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#6272a4">/* Keyword values */</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">normal</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">bold</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span style="color:#6272a4">/* Keyword values relative to the parent */</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">lighter</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">bolder</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span style="color:#6272a4">/* Numeric keyword values */</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">100</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">100</span>.<span style="color:#50fa7b">6</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">123</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">200</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">300</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">321</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">400</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">500</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">600</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">700</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">800</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">900</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">1000</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span style="color:#6272a4">/* Global values */</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">inherit</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">initial</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">unset</span><span style="color:#ff79c6">;</span>
</code></pre></div><h3 id="4-font-style">4. font-style</h3>
<p><code>font-style</code> CSS 属性允许你选择 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/font-family"><code>font-family</code></a> 字体下的 <code>italic</code> 或 <code>oblique</code> 样式。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#ff79c6">font-style</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">normal</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span><span style="color:#ff79c6">font-style</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">italic</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span style="color:#ff79c6">font-style</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">oblique</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span style="color:#ff79c6">font-style</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">oblique</span> <span style="color:#ff79c6">10deg</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span><span style="color:#6272a4">/* Global values */</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span style="color:#ff79c6">font-style</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">inherit</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8</span><span style="color:#ff79c6">font-style</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">initial</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9</span><span style="color:#ff79c6">font-style</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">unset</span><span style="color:#ff79c6">;</span>
</code></pre></div><h2 id="2-加载网络字体">2. 加载网络字体</h2>
<p>在上一节中说到“CSS 属性 <code>font-family</code> 允许您通过给定一个有先后顺序的，由字体名或者字体族名组成的列表来为选定的元素设置字体。浏览器会在列表中搜寻，直到找到它所运行的系统上可用的字体”，那么可能会出现一个问题，不同的电脑中安装的字体不同，同一个网站在不同电脑上显示的字体也不同。如果我们想让我们的网站显示统一的字体，有以下两种方式，第一种是设置一个每一台电脑上都会装的字体，第二种是使用网络字体，给用户装一个字体。</p>
<p>在Web中，中文一般是不推荐使用网络字体的——因为汉字庞大的字符数让中文网络字体的体积异常庞大。但是，如果你经常浏览国外的英文网站，你会发现——使用了网络字体的网页是真的很美！所以，为何中文网页不能一样美呢？</p>
<p>技术进步带来的字体子集化和用户网络带宽的普遍提升，中文网页其实已经可以开始尝试网络字体了。<a href="https://www.apple.com.cn/">苹果的中文官网</a>其实就已经在使用中文网络字体了。<a href="https://fonts.google.com/">Google Fonts</a> 也推出了全新的设计，以庆祝其 10 岁的生日，而其中一个重要的新亮点，就是添加了可变字体（Variable Fonts）的支持。</p>
<p>所以，中文网络字体的普及是刻不容缓的。这需要字体设计师的努力，也需要网页开发者的努力。作为开发者，尝试使用网络字体其实也是我们的一个职责——<em>Making the Web Beautiful!</em></p>
<h3 id="1-font-face">1. @font-face</h3>
<blockquote>
<p>by <a href="http://www.zhangxinxu.com/">zhangxinxu</a> from <a href="http://www.zhangxinxu.com/wordpress/?p=6063">http://www.zhangxinxu.com/wordpress/?p=6063</a></p>
</blockquote>
<h4 id="1-本质是变量">1. 本质是变量</h4>
<p>虽然说CSS3新世界才出现真正意义上的变量<code>var</code>，但实际上，CSS世界中，就已经出现了本质上就是变量的东西，<code>@font face</code>规则就是其中之一，<code>@font face</code>的本质上就是一个定义字体或字体集的变量，这个变量不仅仅是简单的自定义字体，还包括字体重命名，默认字体样式设置等等。</p>
<p>这个“变量”的意识很重要，有助于我们发挥<code>@font face</code>的潜力，可以让我们的CSS代码更加的精简，更方便的维护等。</p>
<p>在进入正题之前，我们先要对<code>@font face</code>规则有个大致的面面观。</p>
<p><code>@font face</code>规则支持的CSS属性有：<code>font-family</code>，<code>src</code>，<code>font-weight</code>，<code>font-style</code>，<code>unicode-range</code>，<code>font-variant</code>，<code>font-stretch</code>，<code>font-feature-settings</code>。例如：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>@<span style="color:#ff79c6">font-face</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>  <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;example&#39;</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>  <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">url</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">example</span>.<span style="color:#50fa7b">ttf</span><span style="color:#ff79c6">);</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>  <span style="color:#ff79c6">font-style</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">normal</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>  <span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">normal</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>  <span style="color:#ff79c6">unicode-range</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">U</span><span style="color:#ff79c6">+</span><span style="color:#ff79c6">0025-00FF</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>  <span style="color:#ff79c6">font-variant</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">small-caps</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>  <span style="color:#ff79c6">font-stretch</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">expanded</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>  <span style="color:#ff79c6">font-feature-settings</span>：<span style="color:#f1fa8c">&#34;liga1&#34;</span> <span style="color:#ff79c6">on</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>}
</code></pre></div><p>属性还是挺多的，而且有些属性，估计是他认识你，你不认识他。但是从实用角度来讲，有些属性其实可以不用去深究，例如<code>font-variant</code>，<code>font-stretch</code>，<code>font-feature-settings</code>这<code>3</code>个属性。为什么呢？因为按照我的经验理解，这<code>3</code>个属性给我感觉更像是专为英文设计的，所以如果不是有业务需要，可以先放一放。</p>
<p>好，现在，是不是感觉压力一下子小了很多，我们需要在意的可以自定义的属性就只剩下下面这些：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>@<span style="color:#ff79c6">font-face</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>  <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;example&#39;</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>  <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">url</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">example</span>.<span style="color:#50fa7b">ttf</span><span style="color:#ff79c6">);</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>  <span style="color:#ff79c6">font-style</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">normal</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span>  <span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">normal</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span>  <span style="color:#ff79c6">unicode-range</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">U</span><span style="color:#ff79c6">+</span><span style="color:#ff79c6">0025-00FF</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span>}
</code></pre></div><p>在介绍每个属性之前，有必要郑重声明一下，接下来有大量的案例，全是基于<code>local</code>本地字体做示意的，而IE7，IE8浏览器是不支持<code>local</code>本地字体的。</p>
<h4 id="2-常用属性">2. 常用属性</h4>
<h5 id="1-font-family-1">1. font-family</h5>
<p>这里的<code>font-family</code>可以看成是一个字体变量，名称可以非常随意，例如直接一个美元符号<code>'$'</code>，例如：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>@<span style="color:#ff79c6">font-face</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>  <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;$&#39;</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>  <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">local</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;Microsoft Yahei&#34;</span><span style="color:#ff79c6">);</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>}
</code></pre></div><p>这时候，对普通HTML元素，你设置其<code>font-family</code>属性值为<code>'$'</code>，则其字体表现就变成了“微软雅黑”（如果本地有这个字体）。</p>
<p>甚至非IE浏览器下可以直接使用纯空格<code>' '</code>，不过有一点需要注意，就是使用这些稀奇古怪的字符或者有空格的时候，一定要加引号。</p>
<p>虽然说自己变量名可以很随意，但是有一类名称，不能随便设置，就是原本系统就有的字体名称，例如下面的代码：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>@<span style="color:#ff79c6">font-face</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>  <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;Microsoft Yahei&#39;</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>  <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">local</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">SimSun</span><span style="color:#ff79c6">);</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>}
</code></pre></div><p>从此“微软雅黑”字体就变成了“宋体”。当然，有时候我们说不定就需要这种覆盖，比如说新来了一个设计主管，平生最看不惯“微软雅黑”，希望换成其他字体，这个时候我们就可以使用这个变量覆盖轻轻松松完成整站的字体变更。</p>
<h5 id="2-src">2. src</h5>
<p><code>src</code>表示调用字体文件，可以是本地字体文件（IE9+支持），也可以是线上地址（可能有跨域限制）。</p>
<p>本文主要着重介绍本地字体文件的应用。</p>
<p><strong>作用1：字体文件名简写</strong>
现在很多网站会使用“微软雅黑”字体，但是，“微软雅黑”的名称有点长：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>.<span style="color:#50fa7b">font</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>    <span style="color:#ff79c6">font-family</span>: <span style="color:#f1fa8c">&#39;Microsoft Yahei&#39;</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>}
</code></pre></div><p>小手一抖，说不定就拼错了，还要加引号，还要加空格，好麻烦的勒。此时我们就可以利用<code>@font face</code>规则简化，这样就容易记忆了，书写更快了：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>@<span style="color:#ff79c6">font-face</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>  <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">YH</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>  <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">local</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;Microsoft Yahei&#34;</span><span style="color:#ff79c6">);</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>}
</code></pre></div><p>使用的时候直接：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>.<span style="color:#50fa7b">font</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>    <span style="color:#ff79c6">font-family</span>: YH;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>}
</code></pre></div><p>多么干净，多么清爽，心情多么舒畅！</p>
<p><code>src</code>还支持多个<code>local</code>字体地址同时出现，嘿，这简化的CSS代码可不是一个字体名了，而是一大波字体名称了，例如某网站使用了大量类似下面的<code>font-family</code>属性值：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#ff79c6">body</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>    <span style="color:#ff79c6">font-family</span>: PingFangSC-Regular,HelveticaNeue-Light,<span style="color:#f1fa8c">&#39;Helvetica Neue Light&#39;</span>,<span style="color:#f1fa8c">&#39;Microsoft YaHei&#39;</span>,<span style="color:#ff79c6">sans-serif</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>.<span style="color:#50fa7b">xxxx</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span>    <span style="color:#ff79c6">font-family</span>: PingFangSC-Regular,HelveticaNeue-Light,<span style="color:#f1fa8c">&#39;Helvetica Neue Light&#39;</span>,<span style="color:#f1fa8c">&#39;Microsoft YaHei&#39;</span>,<span style="color:#ff79c6">sans-serif</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span>}
</code></pre></div><p>虽然说，实现的时候，借助了Sass, Less之类工具让字体名称们成为了变量，写代码的时候好像也没怎么吃力，但是最终生成的CSS其实是比较啰嗦，如果我们走本质上就是变量的<code>@font face</code>，是不是不仅开发简单，代码也简单了，如下处理：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>@<span style="color:#ff79c6">font-face</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>  <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">BASE</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>  <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">local</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;HelveticaNeue-Light&#34;</span><span style="color:#ff79c6">),</span> <span style="color:#ff79c6">local</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;Helvetica Neue Light&#34;</span><span style="color:#ff79c6">),</span>  <span style="color:#ff79c6">local</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;PingFang SC&#34;</span><span style="color:#ff79c6">),</span> <span style="color:#ff79c6">local</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;Microsoft YaHei&#34;</span><span style="color:#ff79c6">),</span> <span style="color:#ff79c6">local</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">sans-serif</span><span style="color:#ff79c6">);</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>}
</code></pre></div><p>于是我们用字体的时候直接：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#ff79c6">body</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>    <span style="color:#ff79c6">font-family</span>: BASE;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>.<span style="color:#50fa7b">xxxx</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span>    <span style="color:#ff79c6">font-family</span>: BASE;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span>}
</code></pre></div><p>看语义又好，代码又简单，实用又方便，超级使用的小技巧。</p>
<p>当然，<code>local</code>本地作用还不止这些。</p>
<p>业界有个名为“<a href="http://font-spider.org/">字蛛</a>”的中文字体处理工具，可以提取页面中使用的特殊中文字体并生成新的体积更小的自定义字体。我们可以在这个基础上更进一步，举个例子：</p>
<p>一些特殊的标题设计师就是喜欢用“方正粗雅宋”这个字体（已经购得版权），但是很显然，这么帅气的字体，几乎很少有用户安装的，所以实际开发的时候，全都是通过工具而生成一个全新的精简版的“方正粗雅宋”字体文件，再通过<code>src</code>属性<code>url()</code>方法外链这个字体文件。</p>
<p>很棒的方案，但还不够完美，为什么呢？虽然安装“方正粗雅宋”这个字体的用户并不多，但并不表示没有用户使用之。试想一下，假如有用户安装了这个字体，结果你在网页呈现的时候，还要再去外链一个额外的文件地址，岂不是白白的浪费？既浪费流量，体验又不一定好，如果字体文件加载慢，会看到文字“变形”的过程，显然是不友好的。</p>
<p>我们可以借助<code>@font face</code>规则中的<code>local</code>实现代码和体验上的进一步的提升，如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>@<span style="color:#ff79c6">font-face</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>  <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">FZCYS</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>  <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">local</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;FZYaSongS-B-GB&#34;</span><span style="color:#ff79c6">),</span> 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>       <span style="color:#ff79c6">url</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;FZCYS.woff2&#34;</span><span style="color:#ff79c6">),</span>  
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span>       <span style="color:#ff79c6">url</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;FZCYS.woff&#34;</span><span style="color:#ff79c6">),</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span>       <span style="color:#ff79c6">url</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;FZCYS.ttf&#34;</span><span style="color:#ff79c6">);</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span>}
</code></pre></div><p>于是乎，那些安装了“方正粗雅宋”这个字体的用户，就没有任何字体文件请求。加载更快了，用户体验上升了，还省了流量，如此百益无一害的事情，还不妥妥的用起来。</p>
<h5 id="3-font-style">3. font-style</h5>
<p>在Chrome浏览器下，<code>@font face</code>规则设置<code>font-style:italic</code>可以让文字倾斜，但是这并不是其作用所在。</p>
<p><code>@font face</code>规则中的<code>font-style</code>和<code>font-weight</code>类似，都是用来设置对应字体样式或自重下该使用什么字体。因为有些字体可能会有专门的斜体字，注意这个斜体字，并不是让文字的形状倾斜，而是专门设计的倾斜的字体，很多细节会跟物理上的请求不一样。于是，我在CSS代码中使用<code>font-style:italic</code>的时候，就会调用这个对应字体，如下示意：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>@<span style="color:#ff79c6">font-face</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>  <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;I&#39;</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>  <span style="color:#ff79c6">font-style</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">normal</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>  <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">local</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#39;FZYaoti&#39;</span><span style="color:#ff79c6">);</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>@<span style="color:#ff79c6">font-face</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>  <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;I&#39;</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>  <span style="color:#ff79c6">font-style</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">italic</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>  <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">local</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#39;FZShuTi&#39;</span><span style="color:#ff79c6">);</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>}
</code></pre></div><p>由于专门的斜体字不太好找，所以我使用“方正姚体”和“方正舒体”代替做示意。上面CSS代码我解读一下：制定一个字体，名叫<code>'I'</code>，当文字样式正常的时候，字体表现使用“方正姚体”，当文字设置了<code>font-style:italic</code>的时候，字体表现为“方正舒体”。</p>
<p>好，现在假设有下面这样的CSS和HTML：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>.<span style="color:#50fa7b">i</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>  <span style="color:#ff79c6">font-family</span>: I;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">p</span><span style="color:#ff79c6">&gt;&lt;</span><span style="color:#ff79c6">i</span> <span style="color:#ff79c6">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;i&#34;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">类名是i</span>，<span style="color:#ff79c6">标签是i</span><span style="color:#ff79c6">&lt;/</span><span style="color:#ff79c6">i</span><span style="color:#ff79c6">&gt;&lt;/</span><span style="color:#ff79c6">p</span><span style="color:#ff79c6">&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span><span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">p</span><span style="color:#ff79c6">&gt;&lt;</span><span style="color:#ff79c6">span</span> <span style="color:#ff79c6">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;i&#34;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">类名是i</span><span style="color:#ff79c6">,</span> <span style="color:#ff79c6">标签是span</span><span style="color:#ff79c6">&lt;/</span><span style="color:#ff79c6">span</span><span style="color:#ff79c6">&gt;&lt;/</span><span style="color:#ff79c6">p</span><span style="color:#ff79c6">&gt;</span>
</code></pre></div><p>请问最终的表现是怎样的？</p>
<p>由于<code>&lt;i&gt;</code>标签天然<code>font-style:italic</code>，因此理论上，上面一行文字表现为“方正舒体”，下面一行为“方正姚体”，最终结果是如何呢？这下大家应该明白，<code>@font face</code>规则中的<code>font-style</code>是干嘛用的了吧。</p>
<h5 id="4-font-weight">4. font-weight</h5>
<p><code>font-weight</code>和<code>font-style</code>类似，不过是定义了不同字重使用不同字体，对于中午而言，这个要比<code>font-style</code>适用性强很多。我这里就有一个非常具有代表性的例子，版权字体“汉仪旗黑”自重非常丰富，但是这个字体不像“思源黑体”，天然可以根据<code>font-weight</code>属性值加载对应的字体文件，怎么办呢？很简单，使用<code>@font face</code>规则重新定义一下即可，例如下面的CSS代码：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>@<span style="color:#ff79c6">font-face</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>  <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;QH&#39;</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>  <span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">400</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>  <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">local</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#39;HYQihei 40S&#39;</span><span style="color:#ff79c6">);</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>@<span style="color:#ff79c6">font-face</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>  <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;QH&#39;</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>  <span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">500</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>  <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">local</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#39;HYQihei 50S&#39;</span><span style="color:#ff79c6">);</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>@<span style="color:#ff79c6">font-face</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>  <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;QH&#39;</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>  <span style="color:#ff79c6">font-weight</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">600</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>  <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">local</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#39;HYQihei 60S&#39;</span><span style="color:#ff79c6">);</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span>}
</code></pre></div><p>解读一下就是，是一个全新的字体，名为<code>'QH'</code>，当字重<code>font-weight</code>为<code>400</code>的时候，使用“汉仪旗黑 40S”字重字体，为<code>500</code>的时候，使用“汉仪旗黑 50S”字重字体，为<code>600</code>的时候，使用“汉仪旗黑 60S”字重字体。</p>
<p>于是乎，当我们应用如下的CSS和HTML代码的时候：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>.<span style="color:#50fa7b">hy-40s</span><span style="color:#ff79c6">,</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>.<span style="color:#50fa7b">hy-50s</span><span style="color:#ff79c6">,</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>.<span style="color:#50fa7b">hy-60s</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>  <span style="color:#ff79c6">font-family</span>: <span style="color:#f1fa8c">&#39;QH&#39;</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>.<span style="color:#50fa7b">hy-40s</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>  <span style="color:#ff79c6">font-weight</span>: <span style="color:#bd93f9">400</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>.<span style="color:#50fa7b">hy-50s</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>  <span style="color:#ff79c6">font-weight</span>: <span style="color:#bd93f9">500</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>.<span style="color:#50fa7b">hy-60s</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>  <span style="color:#ff79c6">font-weight</span>: <span style="color:#bd93f9">600</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">ul</span><span style="color:#ff79c6">&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>  <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">li</span> <span style="color:#ff79c6">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;hy-40s&#34;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">汉仪旗黑40s</span><span style="color:#ff79c6">&lt;/</span><span style="color:#ff79c6">li</span><span style="color:#ff79c6">&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>  <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">li</span> <span style="color:#ff79c6">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;hy-50s&#34;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">汉仪旗黑50s</span><span style="color:#ff79c6">&lt;/</span><span style="color:#ff79c6">li</span><span style="color:#ff79c6">&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>  <span style="color:#ff79c6">&lt;</span><span style="color:#ff79c6">li</span> <span style="color:#ff79c6">class</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;hy-60s&#34;</span><span style="color:#ff79c6">&gt;</span><span style="color:#ff79c6">汉仪旗黑60s</span><span style="color:#ff79c6">&lt;/</span><span style="color:#ff79c6">li</span><span style="color:#ff79c6">&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span style="color:#ff79c6">&lt;/</span><span style="color:#ff79c6">ul</span><span style="color:#ff79c6">&gt;</span>
</code></pre></div><p>如果用在网页开发中，必定会让我们的界面更加的细腻，设计更加的精致，视觉更加的愉悦。</p>
<h5 id="5-unicode-range">5. unicode-range</h5>
<p><code>unicode-range</code>的作用是可以让特定的字符或者字符片段使用特定的字体。举个例子，下图是文字应用了“微软雅黑”字体后的效果：</p>
<p><img src="https://blogimg-1302307650.cos.ap-shanghai.myqcloud.com/2016-11-12_192328.png" alt="微软雅黑的冒号"></p>
<p>但是，这两个“引号”左右间隙不均，方向不明，实在是看着不爽，此时我们就专门指定这两个“引号”使用其他字体，如下CSS：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>@<span style="color:#ff79c6">font-face</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>  <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">BASE</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>  <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">local</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#34;Microsoft Yahei&#34;</span><span style="color:#ff79c6">);</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>@<span style="color:#ff79c6">font-face</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>  <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">quote</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>  <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">local</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#39;SimSun&#39;</span><span style="color:#ff79c6">);</span>    
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>  <span style="color:#ff79c6">unicode-range</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">U</span><span style="color:#ff79c6">+</span><span style="color:#ff79c6">201c</span><span style="color:#ff79c6">,</span> <span style="color:#ff79c6">U</span><span style="color:#ff79c6">+</span><span style="color:#ff79c6">201d</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>.<span style="color:#50fa7b">font</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>    <span style="color:#ff79c6">font-family</span>: quote, BASE;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>}
</code></pre></div><p>然后效果就变成这样子了：</p>
<p><img src="https://blogimg-1302307650.cos.ap-shanghai.myqcloud.com/2016-11-12_192511.png" alt="变成宋体引号后的效果"></p>
<p>嗯，一下子变得舒服多了。</p>
<h3 id="2-link">2. link</h3>
<h4 id="1-link标签的属性">1. link标签的属性</h4>
<p>link 元素用于链接外部<code>css</code>样式表等其他相关外部资源。</p>
<p>其中<code>link</code>中包括如下属性。</p>
<ul>
<li><code>href</code>：指明外部资源文件的路径，即告诉浏览器外部资源的位置</li>
<li><code>hreflang</code>：说明外部资源使用的语言</li>
<li><code>media</code>：说明外部资源用于哪种设备</li>
<li><code>rel</code>：必填，表明当前文档和外部资源的关系</li>
<li><code>sizes</code>：指定图标的大小，只对属性<code>rel=&quot;icon&quot;</code>生效</li>
<li><code>type</code>：说明外部资源的 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTTP%2FBasics_of_HTTP%2FMIME_types">MIME</a> 类型，如<code>text/css</code>、<code>image/x-icon</code></li>
</ul>
<p>其中<code>rel</code>是核心属性，其参数值如下，也可参考 <a href="https://link.juejin.cn/?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FHTML%2FLink_types">MDN</a>：</p>
<ul>
<li><code>alternate</code>：链接到文档的替代版本</li>
<li><code>archives</code>：链接到文档集或历史数据</li>
<li><code>author</code>：提供指向文档作者的链接</li>
<li><code>bookmark</code>：定义文档在收藏夹中显示的书签图标</li>
<li><code>canonical</code>：指明网站的规范版本</li>
<li><code>dns-prefetch</code>：指定浏览器预先执行目标资源的<code>DNS</code>解析</li>
<li><code>external</code>：链接到外部，即告知搜索引擎，此链接不是本站链接</li>
<li><code>first</code>：链接到集合中的首个文档</li>
<li><code>help</code>：链接帮助信息</li>
<li><code>icon</code>：定义网站或网页在浏览器标题栏中的图标</li>
<li><code>license</code>：链接到文档的版权信息</li>
<li><code>last</code>：链接到集合中的末个文档</li>
<li><code>nofollow</code>：指定文档不被搜索引擎跟踪，即某些页面不被爬虫抓取</li>
<li><code>next</code>：记录文档的下一页（浏览器可以提前加载此页）</li>
<li><code>noreferrer</code>：可以阻止浏览器发送访问来源信息</li>
<li><code>preload</code>：对资源进行预加载</li>
<li><code>pingback</code>：提供处理当前文档的<code>pingback</code>服务器地址</li>
<li><code>prefetch</code>：对资源进行预加载并缓存，通常<code>preload</code>用于加载当前页面的资源，而<code>prefetch</code>用于加载将来页面可能需要的资源</li>
<li><code>preconnect</code>：预先连接到目标资源的地址</li>
<li><code>prev</code>：记录文档的下一页</li>
<li><code>search</code>：链接到文档的搜索工具</li>
<li><code>stylesheet</code>：指定作为样式表的外部资源</li>
<li><code>sidebar</code>：指定浏览器边栏中显示的文档</li>
<li><code>tag</code>：指定当前文档使用的标签、关键词</li>
<li><code>up</code>：指向一个文档，此文档提供此网页的上下文关系</li>
</ul>
<p>其中<code>stylesheet</code>指定作为样式表的外部资源，</p>
<p>人们每天数以千次地像这样操作谷歌字体：选择一些看起来不错的网络可用字体，将它的 <code>&lt;link&gt;</code> 标签放入 <code>&lt;head&gt;</code> 中，然后检查它们是否显示正确。我们来看下 Lighthouse 是如何评价这样的工作流的。</p>
<p><img src="https://blogimg-1302307650.cos.ap-shanghai.myqcloud.com/Lighthouse.webp" alt="Lighthouse"></p>
<p>标签中的样式表被 Lighthouse 标记为阻塞渲染的资源，它们竟然让渲染增加了一秒钟？这看起来不是很好。我们已经按照书籍，文档，HTML 标准完成了所有工作，为什么 Lighthouse 还是会告诉我这样不对呢？</p>
<p>让我们来讨论下如何让字体样式文件成为非渲染阻塞资源，并且探讨一种不仅让 Lighthouse 满意，还要解决加载字体时通常会出现糟糕的无样式文本闪烁（FOUT）问题。我们将使用原生的 HTML，CSS 和 JavaScript 来完成这些工作，因此我们可以在任何技术栈中使用它们。</p>
<h4 id="2-渲染阻塞字体">2. 渲染阻塞字体</h4>
<p>浏览器加载网页时，会从 DOM（HTML 的一个对象模型）和 CSSOM（所有 css 选择器的映射）中生成渲染树。渲染树是关键渲染路径中的一部分，关键渲染路径代表了浏览器在渲染页面中的每个步骤。浏览器为了渲染一个页面，需要加载并解析 HTML 文档以及链接到该 HTML 中的每个 CSS 文件。</p>
<p>下面是一个非常典型的直接从谷歌字体样式表：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-css" data-lang="css"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>@<span style="color:#ff79c6">font-face</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>  <span style="color:#ff79c6">font-family</span><span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#39;Merriweather&#39;</span><span style="color:#ff79c6">;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>  <span style="color:#ff79c6">src</span><span style="color:#ff79c6">:</span> <span style="color:#ff79c6">local</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#39;Merriweather&#39;</span><span style="color:#ff79c6">),</span> <span style="color:#ff79c6">url</span><span style="color:#ff79c6">(</span><span style="color:#ff79c6">https</span><span style="color:#ff79c6">://</span><span style="color:#ff79c6">fonts</span>.<span style="color:#50fa7b">gstatic</span>.<span style="color:#50fa7b">com</span><span style="color:#ff79c6">/...)</span> <span style="color:#ff79c6">format</span><span style="color:#ff79c6">(</span><span style="color:#f1fa8c">&#39;woff2&#39;</span><span style="color:#ff79c6">);</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>}
</code></pre></div><p>你可能会认为字体样式的文件体积很小，因为他们通常最多包含一些 <code>@font-face</code> 定义。因此它们应该不会对页面渲染造成可以感知的影响，事实是这样吗？</p>
<p>假设我们正在从外部 CDN 服务器加载一个 CSS 字体文件。当我们的网页在加载时，浏览器需要等待文件从 CDN 服务器上加载并且载入到渲染树中。不仅如此，它还需要等待在 CSS 的 <code>@font-face</code> 属性中定义的作为 URL 值引用的字体文件请求并加载完成。</p>
<p>关键点：字体文件成为关键渲染路径的一部分，并且延迟了页面的渲染。</p>
<p><a href="https://blog.jsonfeed.cn/load-web-fonts-best-practice/Render-Blocking.webp"><img src="https://blog.jsonfeed.cn/load-web-fonts-best-practice/Render-Blocking.webp" alt="字体样式表和字体文件加载时阻塞了关键渲染路径"></a></p>
<p>对于普通用户来说网站最重要的部分是什么？当然是内容了。因此在页面加载过程中我们必须尽快将内容呈现给用户。为此，关键渲染路径必须精简到只剩下关键资源 (例如 HTML 和关键的 CSS)，其余的内容将在页面渲染完成后加载，包括字体。</p>
<p>如果一个用户正在较差的网络环境下浏览未经过优化的页面，坐在空白的屏幕前等待字体文件和其他关键资源载入完成将会使他非常恼火。除非该用户非常有耐心，否则他很可能会以为是页面根本没有开始加载，直接放弃等待，关闭窗口。</p>
<p>然而，如果非关键资源的渲染被推迟，内容尽可能快地被呈现了出来，用户将能够浏览页面并且忽略任何缺少的表现样式 (比如字体)—— 当然，如果字体并不是内容的一部分的话。</p>
<p><a href="https://blog.jsonfeed.cn/load-web-fonts-best-practice/Render-Optimized-vs-Unoptimized.webp"><img src="https://blog.jsonfeed.cn/load-web-fonts-best-practice/Render-Optimized-vs-Unoptimized.webp" alt="重要资源：未优化 VS 已优化"></a></p>
<p>经过优化的网站尽可能快地渲染包含关键 CSS 的内容，并且延迟非关键资源的加载。第二个时间线的 0.5s 和 1.0s 之间出现了一个字体的切换，表明了显示样式开始渲染的时间。</p>
<h4 id="3-载入字体的最佳实践">3. 载入字体的最佳实践</h4>
<p>重复造轮子没有意义。哈里·罗伯茨（Harry Roberts）已经很好地介绍了一种加载字体的最佳实践。他通过深入的研究以及来自谷歌字体的数据，将其归纳为四个步骤：</p>
<ul>
<li>预连接到字体文件的站点</li>
<li>以低优先级异步预加载字体样式表</li>
<li>在内容渲染完成后，使用JavaScript异步加载字体样式表和字体文件</li>
<li>为关闭JavaScript的用户提供一个备用字体</li>
</ul>
<p>让我们使用 Harry 的方法来实现我们的字体：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#6272a4">&lt;!-- https://fonts.gstatic.com is the font file origin --&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#6272a4">&lt;!-- It may not have the same origin as the CSS file (https://fonts.googleapis.com) --&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>&lt;<span style="color:#ff79c6">link</span> <span style="color:#50fa7b">rel</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;preconnect&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>      <span style="color:#50fa7b">href</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;https://fonts.gstatic.com&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>      <span style="color:#50fa7b">crossorigin</span> /&gt;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span style="color:#6272a4">&lt;!-- We use the full link to the CSS file in the rest of the tags --&gt;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>&lt;<span style="color:#ff79c6">link</span> <span style="color:#50fa7b">rel</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;preload&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>      <span style="color:#50fa7b">as</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;style&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>      <span style="color:#50fa7b">href</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;https://fonts.googleapis.com/css2?family=Merriweather&amp;display=swap&#34;</span> /&gt;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>&lt;<span style="color:#ff79c6">link</span> <span style="color:#50fa7b">rel</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;stylesheet&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>      <span style="color:#50fa7b">href</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;https://fonts.googleapis.com/css2?family=Merriweather&amp;display=swap&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>      <span style="color:#50fa7b">media</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;print&#34;</span> <span style="color:#50fa7b">onload</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;this.media=&#39;all&#39;&#34;</span> /&gt;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>&lt;<span style="color:#ff79c6">noscript</span>&gt;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>  &lt;<span style="color:#ff79c6">link</span> <span style="color:#50fa7b">rel</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;stylesheet&#34;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>        <span style="color:#50fa7b">href</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;https://fonts.googleapis.com/css2?family=Merriweather&amp;display=swap&#34;</span> /&gt;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span>&lt;/<span style="color:#ff79c6">noscript</span>&gt;
</code></pre></div><p>注意字体样式链接上的 <code>media=&quot;print&quot;</code>。浏览器会自动赋予打印样式一个低优先级并将其排除在关键渲染路径之外。在打印样式表加载完成后，<code>onload</code> 事件将会被触发，媒体将会切换为一个默认的 <code>all</code> 值，字体将被应用于所有的媒体类型（屏幕、打印和语音）。</p>
<p><a href="https://blog.jsonfeed.cn/load-web-fonts-best-practice/Eliminate-Render-Blocking-Resources.webp"><img src="https://blog.jsonfeed.cn/load-web-fonts-best-practice/Eliminate-Render-Blocking-Resources.webp" alt="Eliminate Render Blocking Resources"></a></p>
<p>需要注意的是，自托管字体还可以帮助解决渲染阻塞问题，但这并非适用于所有情况。例如，使用 CDN 可能是不可避免的。在某些情况下，让 CDN 在提供静态资源时承担繁重的工作是有益的。</p>
<h2 id="3-盘古之白">3. 盘古之白</h2>
<blockquote>
<p>第一次留意到「盘古之白」这个词，是在网上看到了这一段搞怪的文字：</p>
<p>有研究显示，打字的时候不喜欢在中文和英文之间加空格的人，感情路都走得很辛苦，有七成的比例会在 34 岁的时候跟自己不爱的人结婚，而其余三成的人最后只能把遗产留给自己的猫。毕竟爱情跟书写都需要适时地留白。</p>
<p>其实这个名称来自某 Chrome 扩展插件作者在他的套件说明中写道：『汉学家称这个空格符为「盘古之白」，因为它劈开了全形字和半形字之间的混沌。』</p>
<p>从那以后，我非常在意自己写作过程中是否使用了「盘古之白」，尤其在写完一篇文章即将发布时会从头到尾检查一遍，在中文和英文、文字和数字之间是否增加了半角空格，发现没有这个问题时才安心发布出来。这个刚开始时形成的强迫症竟然慢慢变成了一种习惯，以至于在阅读朋友们的文章时都会提示对方要注意和遵守这个规则。</p>
<p>其实是否在中英文、文字和数字之间增加了空格的问题，目前国家并没有相关的规范，只是一种习惯罢了。但是使用了空格，文章版面就不至于太紧凑，阅读体验更好。为此我还专门翻阅了许多知名出版社的图书排版，比如三联书店、商务印书馆和中华书局等，编辑都使用了「盘古之白」。除了极个别小出版社，其他的也都遵循这个习惯，可见它还是被绝大多数人认可的。</p>
<p>我们常见到的文字处理工具 InDesign 和 Word 都会在自动在中英文、中文和数字之间添加一个 1/4 的全角空格的宽度。这种加入空格的作用既美化了阅读视觉，也增强了文章易读性。试想，整篇文章下来，一段段文字里密密麻麻堆砌满了数字和英文，是不是让人产生莫名的压迫感？如果增加了这么一个空格，在这两种文字的交界处自由平滑过渡，可以让文本的节奏尽量平稳。</p>
</blockquote>
<blockquote>
<p>這個外掛（支援 Chrome 和 Firefox）正是你在網路世界走跳所需要的東西，它會自動替你在網頁中所有的中文字和半形的英文、數字、符號之間插入空白——<a href="https://github.com/vinta/pangu.js">github_pangu.js</a>。</p>
</blockquote>

      </div>
      <div class="footer">
        <span><a class="category" href="https://tomtomyoung.top/categories/%E5%89%8D%E7%AB%AF/">前端</a></span>
        <span><a class="tag" href="https://tomtomyoung.top/tags/%E5%AD%97%E4%BD%93/">字体</a><a class="tag" href="https://tomtomyoung.top/tags/css/">css</a></span>
      </div>

      
    </div><ul class="menu">
    <li class="menu-item">
        <i class="iconfont icon-top item-btn" id="back_top_btn"></i>
    </li>
    <li class="menu-item">
        <a href="https://tomtomyoung.top/" id="back-btn">
            <i class="iconfont icon-home item-btn"></i>
        </a>
    </li>
    <li class="menu-item">
        <i class="iconfont icon-switch item-btn" id="switch_btn"></i>
    </li>
    <li class="menu-item">
        <i class="iconfont icon-search item-btn" id="search_btn"></i>
    </li>
    <li class="menu-item">
        
        <a class="" href="https://tomtomyoung.top/post/%E5%89%8D%E7%AB%AF%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8%E7%A0%94%E7%A9%B6/" data-tooltip="前端包管理器研究">
            <i class="iconfont icon-left item-btn"></i>
            
        </a>
    </li>
    <li class="menu-item">
        
        </a>
    </li>
</ul></div>
</div>

<div class="cover" id="cover">
        <div class="search-container">
    <input type="search" class="docsearch-input search-input" placeholder="搜索关键词" />
    
</div>
    </div>
</body>








<script type="text/javascript" src="https://tomtomyoung.top/js/util.min.js" integrity=""></script></html>