<!DOCTYPE html>
<html lang="zh-cn" data-theme="light"><head>
    <meta name="google-site-verification" content="kw1N-Xm6qEr1c9PGuRd0U_T6DXkw_EHsLyz5LpuDDv8" />
    <meta name="msvalidate.01" content="EE98205D30806C22C519683EFC53E9BA" />
    <meta name="baidu-site-verification" content="iPC3wUcQLL" />
    <title>  计算机网络 https详解 </title>
    <meta charset="utf-8" /><meta name="generator" content="Hugo 0.74.3" /><meta name="viewport" content="width=device-width,initial-scale=1, minimum-scale=1, maximum-scale=1" />
    <meta name="description" itemprop="description"
        content=" 计算机网络 https详解 " />
    <meta name="keywords" itemprop="keywords"
        content=" [https] " />
    <base href="https://tomtomyoung.top/">
    <link rel="shortcut icon" href="https://tomtomyoung.top/favicons//favicon.ico" type="image/x-icon">
    <link rel="icon" type="image/png" sizes="32x32" href="https://tomtomyoung.top/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://tomtomyoung.top/favicons/favicon-16x16.png">
    <link rel="canonical" href="https://tomtomyoung.top/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-https%E8%AF%A6%E8%A7%A3/">
    <link rel="stylesheet" type="text/css" href="https://at.alicdn.com/t/font_2450869_iypnqhtzjei.css">
    
    
    
    
    
    
    
    
    
    <link rel="stylesheet" href="https://tomtomyoung.top/css/style.min.c4de9a6edfe81f31ea928f93f9e35b24a6f151c056fbe71bdc367da67fba2c4a.css" integrity="" type="text/css">
    
    
    <script type="text/javascript" src="https://tomtomyoung.top/js/docsearch.min.69f8ad33daa0ba1950834aaf16111d935f6a7e2b03db2cc2ae537724142b2719782bcea9aba5996af27f6f94a8365b6575ce2eff90506c2bba9aa0411587116c.js" integrity=""></script>
</head><body class="animated fadeInDown">
<div class="main"><div class="percentage_container">
    <div class="percentage" id="percentage"></div>
</div><div class="toc sub-container">
    <div class="toc-header">
        <span>目录</span>
    </div><ul class="toc-h2"><li>
                <span class="toc-link">1. 对称加密和非对称加密</span>
            </li>
            <li>
                <span class="toc-link">2. https 的加密方式</span>
            </li>
            <li>
                <span class="toc-link">3. 中间人攻击</span>
            </li>
            <li>
                <span class="toc-link">4. CA证书</span>
            </li>
            <li>
                <span class="toc-link">5. HTTPS安全通信机制</span>
            </li>
            <li>
                <span class="toc-link">6. SSL/TLS</span>
            </li>
            </div><div class="single-post container">
    <div class="post">
      <div class="header">
        <span class="title">计算机网络 https详解</span>
        
        <div class="info">
          <span>📅 2021-09-13</span>
          <span>👦 Tomtom Young</span>
          <span>📖 1511字</span>
          <span>⏱ 4分钟</span>
        </div>
        
      </div>
      <div class="content markdown-body">
        <h2 id="1-对称加密和非对称加密">1. 对称加密和非对称加密</h2>
<p><strong>1. 对称加密</strong></p>
<ol>
<li>一个密钥，它可以加密一段信息，也可以对加密后的信息进行解密。</li>
<li>如果通信双方都各自持有同一个密钥，且没有别人知道，这两方的通信安全当然是可以被保证的（除非密钥被破解）。</li>
<li>由服务器生成一个密钥并传输给浏览器，那传输过程中密钥被劫持，劫持者就能用密钥解开双方传输的任何内容了。</li>
<li>如果浏览器内部就预存了网站A的密钥，且可以确保除了浏览器和网站A，这样浏览器要预存好世界上所有HTTPS网站的密钥。</li>
</ol>
<p><strong>2. 非对称加密</strong></p>
<ol>
<li>非对称的密钥分为两个密钥：一把叫做私有密钥，一把叫做公开密钥。</li>
<li>私有密钥不能让其他任何人知道；公开密钥则可以随意发布，任何人都可以获得。</li>
<li>发送密文的一方使用公开密钥进行加密处理，对方收到后，用自己的私有密钥进行解密。</li>
<li>应用到浏览器和服务器的双方通信就是：
<ol>
<li>网站服务器拥有公钥A与对应的私钥A；浏览器拥有公钥B与对应的私钥B。</li>
<li>浏览器把公钥B明文传输给服务器。服务器把公钥A明文给传输浏览器。</li>
<li>浏览器向服务器传输的内容都用公钥A加密，服务器收到后用私钥A解密。</li>
<li>服务器向浏览器传输的内容都用公钥B加密，浏览器收到后用私钥B解密。</li>
</ol>
</li>
<li>非对称加密算法非常耗时。</li>
</ol>
<h2 id="2-https-的加密方式">2. https 的加密方式</h2>
<p><strong>非对称加密+对称加密结合</strong></p>
<ol>
<li>某网站服务器拥有用于非对称加密的公钥A、私钥A。</li>
<li>浏览器向网站服务器请求，服务器把公钥A明文给传输浏览器。</li>
<li>浏览器随机生成一个用于对称加密的密钥X，用公钥A加密后传给服务器。</li>
<li>服务器拿到后用私钥A解密得到密钥X。</li>
<li>之后双方所有数据都通过密钥X加密解密即可。</li>
</ol>
<h2 id="3-中间人攻击">3. 中间人攻击</h2>
<ol>
<li>某网站服务器有用于非对称加密的公钥A、私钥A。</li>
<li>浏览器向网站服务器请求，服务器把公钥A明文给传输浏览器。</li>
<li>中间人劫持到公钥A，保存下来，把数据包中的公钥A替换成自己伪造的公钥B（中间人当然也拥有公钥B对应的私钥B）。</li>
<li>浏览器生成一个用于对称加密的密钥X，用公钥B（浏览器无法得知公钥被替换了）加密后传给服务器。</li>
<li>中间人劫持后用私钥B解密得到密钥X，再用公钥A加密后传给服务器。</li>
<li>服务器拿到后用私钥A解密得到对称加密的密钥X。</li>
</ol>
<p><strong>中间人掉包了服务器传来的公钥，进而得到了密钥X。<strong>根本原因是</strong>浏览器无法确认收到的公钥是不是网站服务器的</strong>。</p>
<h2 id="4-ca证书">4. CA证书</h2>
<p>网站在使用HTTPS协议前，需要向CA机构申领一份数字证书，数字证书里含有证书持有者信息、公钥信息等。服务器把证书传输给浏览器。这里又有一个问题，<strong>证书本身的传输过程中，如何防止被篡改？</strong></p>
<p><strong>数字签名</strong></p>
<p>数字签名是数字证书的“防伪技术”。</p>
<p><strong>数字签名的制作过程：</strong></p>
<ol>
<li>CA机构拥有非对称加密的私钥和公钥。</li>
<li>CA机构对证书明文数据T进行hash。</li>
<li>对hash后的值用私钥加密，得到数字签名S。</li>
</ol>
<p><strong>浏览器验证过程：</strong></p>
<ol>
<li>拿到证书，得到明文T，签名S。</li>
<li>用CA机构的公钥对S解密，得到S。</li>
<li>用证书里指明的hash算法对明文T进行hash得到T。</li>
<li>通过以上步骤，T应当等于S，除非明文或签名被篡改。所以此时比较S是否等于T，等于则表明证书可信。</li>
</ol>
<h2 id="5-https安全通信机制">5. HTTPS安全通信机制</h2>
<p>前提：浏览器内置一个受信任的CA机构列表，并保存了这些CA机构的证书。</p>
<ol>
<li>
<p><strong>认证服务器：</strong></p>
<p>服务器会提供经CA机构认证颁发的服务器证书，如果认证该服务器证书的CA机构存在于浏览器的受信任CA机构列表中，并且服务器证书中的信息与当前正在访问的网站（域名等）一致，那么浏览器就认为服务端是可信的，并从服务器证书中取得服务器公钥，</p>
</li>
<li>
<p><strong>协商会话密钥：</strong></p>
<p>客户端该公钥与服务器进行加密通信，协商出两个会话密钥：用于对称加密</p>
</li>
<li>
<p><strong>加密通讯：</strong></p>
<p>此时客户端服务器双方都有了本次通讯的会话密钥，之后传输的所有HTTP数据，都通过会话密钥加密。</p>
</li>
</ol>
<h2 id="6-ssltls">6. SSL/TLS</h2>
<p><strong>TSL/SSL层就是用来执行上面安全通信机制的协议层。</strong></p>
<p>SSL 是Secure Sockets Layer <strong>安全套接层</strong>。TLS 是 Transport Layer Security <strong>传输层安全协议</strong>。</p>

      </div>
      <div class="footer">
        <span><a class="category" href="https://tomtomyoung.top/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a></span>
        <span><a class="tag" href="https://tomtomyoung.top/tags/https/">https</a></span>
      </div>
    </div>

    <ul class="menu">
    <li class="menu-item">
        <i class="iconfont icon-top item-btn" id="back_top_btn"></i>
    </li>
    <li class="menu-item">
        <a href="https://tomtomyoung.top/" id="back-btn">
            <i class="iconfont icon-home item-btn"></i>
        </a>
    </li>
    <li class="menu-item">
        <i class="iconfont icon-switch item-btn" id="switch_btn"></i>
    </li>
    <li class="menu-item">
        <i class="iconfont icon-search item-btn" id="search_btn"></i>
    </li>
    <li class="menu-item">
        
        <a class="" href="https://tomtomyoung.top/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-tcp%E8%AF%A6%E8%A7%A3/" data-tooltip="计算机网络 tcp详解">
            <i class="iconfont icon-left item-btn"></i>
            
        </a>
    </li>
    <li class="menu-item">
        
        <a class="" href="https://tomtomyoung.top/post/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C-http1.0http1.1http2.0%E5%AF%B9%E6%AF%94/" data-tooltip="计算机网络 http1.0http1.1http2.0对比">
            <i class="iconfont icon-right item-btn"></i>
            
        </a>
    </li>
</ul>

  </div>
</div>

<div class="cover" id="cover">
        <div class="search-container">
    <input type="search" class="docsearch-input search-input" placeholder="搜索关键词" />
    <div id="loading" class="loading-container"></div>
</div>
    </div>
</body>






<script type="text/javascript" src="https://tomtomyoung.top/js/util.min.23fcb467e1267d2c197d5b376a19d64754a5273c549b0ff6810b60cca2dd4afda8c7d8c36cf8c7d9f60a285a94e8495929e857e4f239c4e1839649cf861c27d4.js" integrity=""></script></html>