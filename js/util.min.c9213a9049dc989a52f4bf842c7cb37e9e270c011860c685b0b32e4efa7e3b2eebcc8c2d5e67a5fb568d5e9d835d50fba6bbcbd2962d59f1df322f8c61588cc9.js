var switchBtn,searchContainer,searchBtn,cover,singlePost,headerList,menu,backTopBtn;function throttle(b,c){var a=null;return function(){var d=this,e=arguments;a||(a=setTimeout(function(){b.apply(d,e),a=null},c))}}function getTheme(){return localStorage.getItem('theme')?localStorage.getItem('theme'):null}function setTheme(a){document.documentElement.setAttribute('data-theme',a),localStorage.setItem('theme',a)}function switchTheme(b){var a=getTheme();setTheme(a=='light'?'dark':'light')}(function(){var a=getTheme();const b=window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches;a===null?setTheme(b?'dark':'light'):document.documentElement.setAttribute('data-theme',a=='light'?'light':'dark')})(),switchBtn=document.querySelectorAll('#switch-btn'),window.addEventListener('DOMContentLoaded',a=>{!!switchBtn&&switchBtn.forEach(a=>{a.addEventListener('click',switchTheme)})},{once:!0});function changeSearchShow(a){if(a.target==document.querySelector('#cover')||a.target==document.querySelector('#search-btn')||a.target==document.querySelector('.icon-search'))!!searchContainer&&!!cover&&(searchContainer.classList.toggle('show'),cover.classList.toggle('show')),a.stopPropagation();else return}searchContainer=document.querySelector('.search-container'),searchBtn=document.querySelectorAll('#search-btn'),cover=document.querySelector('#cover'),window.addEventListener('DOMContentLoaded',a=>{!!searchBtn&&searchBtn.forEach(a=>{a.addEventListener('click',changeSearchShow)}),!!cover&&cover.addEventListener('click',changeSearchShow)},{once:!0});function backToTop(){!singlePost||(singlePost.scrollTop=0,checkCurrentHeader(singlePost.scrollTop+singlePost.clientHeight))}function showMenu(a){!menu||(a>50?menu.classList.add('show'):menu.classList.remove('show'))}function checkCurrentHeader(a){if(!!a&&!!headerList){let b;for(let c=0;c<=headerList.length;c++){if(!!headerList[c]&&!!headerList[c+1])if(a>headerList[c].offsetTop&&a<headerList[c+1].offsetTop){b=headerList[c];break}if(!!headerList[c]&&!headerList[c+1])if(a>headerList[c].offsetTop){b=headerList[c];break}}clearActivedTocItem(),!!b&&activateTocItem(b)}}function activateTocItem(b){const c=b.id;let a=document.querySelector(`.toc li a[data-anchorId="${c}"]`);!!a&&a.classList.add('active')}function clearActivedTocItem(){let a=document.querySelectorAll('.toc li .active');!!a&&a.forEach(a=>{a.classList.remove('active')})}function showActiveTocItem2(){const a=new IntersectionObserver(a=>{a.forEach(a=>{const b=a.target.id;if(a.intersectionRatio>0){let a=document.querySelectorAll('.toc li .active');!!a&&a.forEach(a=>{a.classList.remove('active')});let c=document.querySelector(`.toc li a[data-anchorId="${b}"]`);!!c&&c.classList.add('active')}else{if(document.querySelectorAll('.toc li .active').length==1)return;let a=document.querySelector(`.toc li a[data-anchorId="${b}"]`);!!a&&a.classList.remove('active')}})});!!headerList&&headerList.forEach(b=>{a.observe(b)})}singlePost=document.querySelector('.single-post'),headerList=document.querySelectorAll('.content h1[id],h2[id],h3[id],h4[id],h5[id]'),menu=document.querySelector('.menu'),backTopBtn=document.querySelector('#back-top-btn'),window.addEventListener('DOMContentLoaded',a=>{!singlePost||(checkCurrentHeader(singlePost.scrollTop+singlePost.clientHeight),singlePost.addEventListener('scroll',throttle(()=>{checkCurrentHeader(singlePost.scrollTop+singlePost.clientHeight),showMenu(singlePost.scrollTop)},200))),!!backTopBtn&&backTopBtn.addEventListener('click',backToTop)},{once:!0}),window.addEventListener('resize',a=>{!singlePost||checkCurrentHeader(singlePost.scrollTop+singlePost.clientHeight)})