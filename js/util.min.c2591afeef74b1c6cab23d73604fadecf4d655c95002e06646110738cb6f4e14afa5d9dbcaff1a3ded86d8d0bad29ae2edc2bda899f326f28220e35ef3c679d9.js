function getTheme(){return localStorage.getItem('theme')?localStorage.getItem('theme'):null}function setTheme(a){document.documentElement.setAttribute('data-theme',a),localStorage.setItem('theme',a)}function switchTheme(b){var a=getTheme();setTheme(a=='light'?'dark':'light')}(function(){var a=getTheme();const b=window.matchMedia&&window.matchMedia('(prefers-color-scheme: dark)').matches;a===null?setTheme(b?'dark':'light'):document.documentElement.setAttribute('data-theme',a=='light'?'light':'dark')})(),window.addEventListener('DOMContentLoaded',a=>{document.getElementById('switch-btn').addEventListener('click',switchTheme)},{once:!0});function changeSearchShow(a){if(a.target==document.querySelector('#cover')||a.target==document.querySelector('#search-btn')||a.target==document.querySelector('.icon-search')){const b=document.querySelector('.search-container'),c=document.querySelector('#cover');!!b&&!!c&&b.classList.contains('show')&&c.classList.contains('show')?(b.classList.remove('show'),c.classList.remove('show'),document.querySelector('#search-input').focus()):(b.classList.add('show'),c.classList.add('show')),a.stopPropagation()}else return}window.addEventListener('DOMContentLoaded',c=>{let a=document.getElementById('search-btn'),b=document.getElementById('cover');!!a&&a.addEventListener('click',changeSearchShow),!!b&&b.addEventListener('click',changeSearchShow)},{once:!0});function backToTop(){let a=document.querySelector('.single-post');if(!!a){a.scrollTop=0;let b=document.querySelectorAll('.toc li .active');!!b&&b.forEach(a=>{a.classList.remove('active')})}}function throttle(b,c){var a=null;return function(){var d=this,e=arguments;a||(a=setTimeout(function(){b.apply(d,e),a=null},c))}}function showMenu(){let a=document.querySelector('.single-post'),b=document.querySelector('.menu');!!a&&!!b&&a.addEventListener('scroll',throttle(()=>{a.scrollTop>100?b.classList.add('show'):b.classList.remove('show')},200))}var headerList=null;function initTocData(){headerList=document.querySelectorAll('.content h1[id],h2[id],h3[id],h4[id],h5[id]')}function checkCurrentHeader(){let a=document.querySelector('.single-post');!a||a.addEventListener('scroll',throttle(()=>{let c=a.scrollTop+a.clientHeight,b=null;if(!!headerList)for(let a=0;a<=headerList.length;a++){if(!!headerList[a]&&!!headerList[a+1])if(c>headerList[a].offsetTop&&c<headerList[a+1].offsetTop){b=headerList[a];break}if(!!headerList[a]&&!headerList[a+1])if(c>headerList[a].offsetTop){b=headerList[a];break}}let d=document.querySelectorAll('.toc li .active');!!d&&d.forEach(a=>{a.classList.remove('active')}),!!b&&showActiveTocItem(b)},200))}function showActiveTocItem(b){const c=b.id;let a=document.querySelector(`.toc li a[data-anchorId="${c}"]`);!!a&&a.classList.add('active')}function showActiveTocItem2(){const a=new IntersectionObserver(a=>{a.forEach(a=>{const b=a.target.id;if(a.intersectionRatio>0){let a=document.querySelectorAll('.toc li .active');!!a&&a.forEach(a=>{a.classList.remove('active')});let c=document.querySelector(`.toc li a[data-anchorId="${b}"]`);!!c&&c.classList.add('active')}else{if(document.querySelectorAll('.toc li .active').length==1)return;let a=document.querySelector(`.toc li a[data-anchorId="${b}"]`);!!a&&a.classList.remove('active')}})});document.querySelectorAll('.content h1[id],h2[id],h3[id],h4[id],h5[id]').forEach(b=>{a.observe(b)})}window.addEventListener('DOMContentLoaded',a=>{initTocData(),checkCurrentHeader(),showMenu()},{once:!0})